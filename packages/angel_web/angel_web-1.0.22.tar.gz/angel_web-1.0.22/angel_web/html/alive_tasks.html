<script type="text/javascript">
$('#alivet_datagrid').datagrid({
    height: '100%',
    gridTitle : 'Task Information',
    showToolbar: true,
    toolbarItem: 'refresh,|,export,exportf',
    local: 'local',
    dataUrl: '/data/alive_tasks',
	columns:[
		{
			name:"id",
			label:"ID",
			align:"center",
            add:false,
            edit:false,
			width:70
		},
		{
			name:"job_id",
			label:"Job ID",
			align:"center",
			width:70
		},
		{
			name:"group_id",
			label:"Task Group Id",
			align:"center",
			width:70
		},
		{
			name:"worker_id",
			label:"Worker ID",
			align:"center",
			width:70
		},
		{
			name:"runtime",
			label:"Runtime",
			align:"center",
			width:70,
			render:timestamp2str
		},
		{
			name:"done_time",
			label:"Done time",
			align:"center",
			width:70,
			render:timestamp2str
		},
		{
			name:"state",
			label:"State",
			align:"center",
			width:70,
			render:function(value){
				if(value == 100){
					return "Init";
				} else if(value == 102){
					return "<font color='blue'>Running</font>";
				} else if(value == 103){
					return "<font color='red'>Scheduler Timeout</font>";
				} else if(value == 104){
					return "<font color='red'>Running Timeout</font>";
				} else if(value == 105){
					return "<font color='red'>Script Error</font>";
				} else if(value == 1){
					return "<font color='red'>Runtime Error</font>";
				} else if(value == 0){
					return "<font color='green'>Success</font>";
				} else {
					return value;
				}
			}
		},
		{
			name:"operator",
			label:"Operation",
			align:"center",
			width:"70",
			render:function(value, data){
				if(data.state == 0 || data.state == 1 || data.state == 102 || data.state == 104){
					b = "<button type='button' class='btn-default' data-toggle='navtab' data-options='{id:\"{id}\",url:\"{url}\",title:\"{title}\",onClose:\"{onClose}\"}'>Check Log</button>"
					id = "log" + data.id
					url = "/html/log.html?tid=" + data.id
					title = "Log" + data.id
					onClose = "logClose" + data.id
					return b.replace("{id}", id).replace("{title}", title).replace("{url}", url).replace("{onClose}", onClose)
				}
			}
		}
	],
    paging: {pageSize:20, pageCurrent:1},
    linenumberAll: true,
    tableWidth:'100%',
    noremove: false
})
</script>
<div class="bjui-pageHeader" style="background-color:#fff; border-bottom:none;">
    <div class="bs-callout bs-callout-warning">
        <h4>All tasks are list as follows</h4>
		<p>You can add, delete, update, query tasks here</p>
    </div>
</div>
<div class="bjui-pageContent">
	<table id="alivet_datagrid" class="table table-bordered"></table>
</div>
