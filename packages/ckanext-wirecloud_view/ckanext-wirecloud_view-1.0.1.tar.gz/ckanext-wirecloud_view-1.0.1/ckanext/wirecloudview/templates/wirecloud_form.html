{% import 'macros/form.html' as form %}

{% resource 'wirecloud_typeahead/wirecloud_typeahead.js' %}
{% resource 'wirecloud_option/wirecloud_option.js' %}
{% resource 'wirecloud_view/wirecloud_view.css' %}

{{ form.input('dashboard', id='field-dashboard', label=_('Dashboard'), placeholder=_('eg. myuser/dashboard'), value=data.dashboard, attrs={"autocomplete": "off", "data-module": "wirecloud_typeahead", "data-module-workspaces": h.get_workspaces()}, error=errors.dashboard, classes=['control-full', 'control-large']) }}

<div class="option small" data-module="wirecloud_option">
	<span class="wc_sp">Create a new dashboard</span>
	<iframe id="graph_editor" style="margin:auto; height:900px;display:block; width:100%;" src="{{ h.get_editor_url() + '?mode=embedded&ckanserver=' + "://".join(h.get_site_protocol_and_host()) + '&resourceid=' + resource.get('id')}}" frameborder="0" allowfullscreen></iframe>
</div>
