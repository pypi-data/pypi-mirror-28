Metadata-Version: 2.0
Name: kinto-amo
Version: 1.0.0
Summary: AMO-style routing for Kinto - with XML
Home-page: https://github.com/mozilla-services/kinto-amo
Author: Mozilla
Author-email: kinto@mozilla.org
License: Apache License (2.0)
Description-Content-Type: UNKNOWN
Keywords: kinto
Platform: UNKNOWN
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: Apache Software License
Classifier: Natural Language :: English
Classifier: Programming Language :: Python :: 2
Classifier: Programming Language :: Python :: 2.7
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.4
Requires-Dist: amo2kinto (>=3.2.0)
Requires-Dist: kinto (>=4.0.0)

==============
Kinto AMO View
==============

.. image:: https://img.shields.io/travis/mozilla-services/kinto-amo/master.svg
        :target: https://travis-ci.org/mozilla-services/kinto-amo

.. image:: https://img.shields.io/pypi/v/kinto-amo.svg
        :target: https://pypi.python.org/pypi/kinto-amo

.. image:: https://coveralls.io/repos/mozilla-services/kinto-amo/badge.svg?branch=master
        :target: https://coveralls.io/r/mozilla-services/kinto-amo

Return an XML views of the blocklists buckets compatible with the
previous AMO one.


Install
=======

::

    pip install kinto-amo


Setup
=====

In the Kinto project settings

.. code-block:: ini

    kinto.includes = kinto_amo

    # kinto.amo.addons = /buckets/blocklists/collections/addons
    # kinto.amo.plugins = /buckets/blocklists/collections/plugins
    # kinto.amo.gfx = /buckets/blocklists/collections/gfx
    # kinto.amo.certificates = /buckets/blocklists/collections/certificates


You can setup other blocklists for preview for instance using a prefix:

.. code-block:: ini

    kinto.includes = kinto_amo

    kinto.amo.preview.addons = /buckets/blocklists-preview/collections/addons
    kinto.amo.preview.plugins = /buckets/blocklists-preview/collections/plugins
    kinto.amo.preview.gfx = /buckets/blocklists-preview/collections/gfx
    kinto.amo.preview.certificates = /buckets/blocklists-preview/collections/certificates

    kinto.amo.staging.addons = /buckets/staging/collections/addons
    kinto.amo.staging.plugins = /buckets/staging/collections/plugins
    kinto.amo.staging.gfx = /buckets/staging/collections/gfx
    kinto.amo.staging.certificates = /buckets/staging/collections/certificates

You can then access their blocklist from the prefixed URL:

- ``/v1/blocklist/3/{3550f703-e582-4d05-9a08-453d09bdfdc6}/47.0/``
- ``/v1/preview/3/{3550f703-e582-4d05-9a08-453d09bdfdc6}/47.0/``
- ``/v1/staging/3/{3550f703-e582-4d05-9a08-453d09bdfdc6}/47.0/``


CHANGELOG
=========

1.0.0 (2018-02-07)
------------------

- Pass application ID and version to amo2kinto code when generating blocklist.xml. (#23)


0.4.0 (2017-07-05)
------------------

**New features**

- Add support for cache control headers (``If-None-Match`` and ``If-Modified-Since``) (fixes #21)

0.3.0 (2016-10-27)
------------------

- Add the plugin version in the capability. (#15)
- Enable creation of preview XML files from other collections. (#18)


0.2.0 (2016-05-19)
------------------

- Update to ``kinto.core`` for compatibility with Kinto 3.0. This
  release is no longer compatible with Kinto < 3.0, please upgrade!


0.1.1 (2016-05-06)
------------------

- Missing commit in previous release.


0.1.0 (2016-05-06)
------------------

**New features**

- Supports metrics in the URL (#6)
- Add a view to render the XML Blocklists file in versions 1, 2 and 3 (#3)


