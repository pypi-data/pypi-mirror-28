<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Quaternions &mdash; thLib 0.11.6 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.11.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/thLib.ico"/>
    <link rel="top" title="thLib 0.11.6 documentation" href="index.html" />
    <link rel="next" title="Rotation Matrices" href="rotmat.html" />
    <link rel="prev" title="thLib - Documentation" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="rotmat.html" title="Rotation Matrices"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="thLib - Documentation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">thLib 0.11.6 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="quaternions">
<span id="quat-label"></span><h1>Quaternions<a class="headerlink" href="#quaternions" title="Permalink to this headline">¶</a></h1>
<p>Note that all these functions work with single quaternions and quaternion vectors,
as well as with arrays containing these.</p>
<div class="section" id="quaternion-class">
<h2>Quaternion class<a class="headerlink" href="#quaternion-class" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="#quat.Quaternion" title="quat.Quaternion"><code class="xref py py-class docutils literal"><span class="pre">quat.Quaternion</span></code></a> ... Quaternion class</li>
</ul>
</div>
<div class="section" id="functions-for-working-with-quaternions">
<h2>Functions for working with quaternions<a class="headerlink" href="#functions-for-working-with-quaternions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="#quat.quatconj" title="quat.quatconj"><code class="xref py py-func docutils literal"><span class="pre">quat.quatconj()</span></code></a> ... Conjugate quaternion</li>
<li><a class="reference internal" href="#quat.quatinv" title="quat.quatinv"><code class="xref py py-func docutils literal"><span class="pre">quat.quatinv()</span></code></a> ... Quaternion inversion</li>
<li><a class="reference internal" href="#quat.quatmult" title="quat.quatmult"><code class="xref py py-func docutils literal"><span class="pre">quat.quatmult()</span></code></a> ... Quaternion multiplication</li>
</ul>
</div>
<div class="section" id="conversion-routines">
<h2>Conversion routines<a class="headerlink" href="#conversion-routines" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="#quat.deg2quat" title="quat.deg2quat"><code class="xref py py-func docutils literal"><span class="pre">quat.deg2quat()</span></code></a> ... Convert number or axis angles to quaternion vectors</li>
<li><a class="reference internal" href="#quat.quat2deg" title="quat.quat2deg"><code class="xref py py-func docutils literal"><span class="pre">quat.quat2deg()</span></code></a> ... Convert quaternion to corresponding axis angle</li>
<li><a class="reference internal" href="#quat.quat2rotmat" title="quat.quat2rotmat"><code class="xref py py-func docutils literal"><span class="pre">quat.quat2rotmat()</span></code></a> ... Convert quaternion to corresponding rotation matrix</li>
<li><a class="reference internal" href="#quat.quat2vect" title="quat.quat2vect"><code class="xref py py-func docutils literal"><span class="pre">quat.quat2vect()</span></code></a> ... Extract the vector part from a quaternion</li>
<li><a class="reference internal" href="#quat.quat2vel" title="quat.quat2vel"><code class="xref py py-func docutils literal"><span class="pre">quat.quat2vel()</span></code></a> ... Calculates the velocity in space from quaternions</li>
<li><a class="reference internal" href="#quat.rotmat2quat" title="quat.rotmat2quat"><code class="xref py py-func docutils literal"><span class="pre">quat.rotmat2quat()</span></code></a> ... Convert a rotation matrix to the corresponding quaternion</li>
<li><a class="reference internal" href="#quat.vect2quat" title="quat.vect2quat"><code class="xref py py-func docutils literal"><span class="pre">quat.vect2quat()</span></code></a> ... Extend a quaternion vector to a unit quaternion.</li>
<li><a class="reference internal" href="#quat.vel2quat" title="quat.vel2quat"><code class="xref py py-func docutils literal"><span class="pre">quat.vel2quat()</span></code></a> ... Calculate orientation from a starting orientation and angular velocity.</li>
</ul>
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
</div>
<div class="section" id="module-quat">
<span id="details"></span><h2>Details<a class="headerlink" href="#module-quat" title="Permalink to this headline">¶</a></h2>
<p>Functions for working with quaternions. Note that all the functions also
work on arrays, and can deal with full quaternions as well as with
quaternion vectors.</p>
<p>A &#8220;Quaternion&#8221; class is defined, with</p>
<ul class="simple">
<li>operator overloading for mult, div, and inv.</li>
<li>indexing</li>
</ul>
<dl class="class">
<dt id="quat.Quaternion">
<em class="property">class </em><code class="descclassname">quat.</code><code class="descname">Quaternion</code><span class="sig-paren">(</span><em>inData</em>, <em>inType='vector'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/quat.html#Quaternion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#quat.Quaternion" title="Permalink to this definition">¶</a></dt>
<dd><p>Quaternion class, with multiplocation, division, and inverse.
A Quaternion can be created from vectors, rotation matrices,
or from Fick-angles, Helmholtz-angles, or Euler angles (in deg).
It provides</p>
<ul class="simple">
<li>operator overloading for mult, div, and inv.</li>
<li>indexing</li>
<li>access to the data, in the attribute <em>values</em>.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>inData</strong> : ndarray</p>
<blockquote>
<div><p>Contains the data in one of the following formats:</p>
<ul>
<li><p class="first">vector : (3 x n) or (4 x n) array, containing the quaternion values</p>
</li>
<li><dl class="first docutils">
<dt>rotmat <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (3,3) or (N,9)</span></dt>
<dd><p class="first last">single rotation matrix, or matrix with rotation-matrix elements.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Fick <span class="classifier-delimiter">:</span> <span class="classifier">(3 x n) array, containing (psi, phi, theta) rotations about</span></dt>
<dd><p class="first last">the (1,2,3) axes [deg] (Fick sequence)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Helmholtz <span class="classifier-delimiter">:</span> <span class="classifier">(3 x n) array, containing (psi, phi, theta) rotations about</span></dt>
<dd><p class="first last">the (1,2,3) axes [deg] (Helmholtz sequence)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Euler <span class="classifier-delimiter">:</span> <span class="classifier">(3 x n) array, containing (alpha, beta, gamma) rotations about</span></dt>
<dd><p class="first last">the (3,1,3) axes [deg] (Euler sequence)</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p><strong>inType</strong> : string</p>
<blockquote class="last">
<div><p>Specifies the type of the input and has to have one of the following values
&#8216;vector&#8217;[Default], &#8216;rotmat&#8217;, &#8216;Fick&#8217;, &#8216;Helmholtz&#8217;, &#8216;Euler&#8217;</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<div class="math">
\[\begin{split}\vec {q}_{Euler}  = \left[ {\begin{array}{*{20}{c}}
  {\cos \frac{\alpha }{2}*\cos \frac{\beta }{2}*\cos \frac{\gamma }{2} - \sin \frac{\alpha }{2}\cos \frac{\beta }{2}\sin \frac{\gamma }{2}} \\ 
  {\cos \frac{\alpha }{2}*\sin \frac{\beta }{2}*\cos \frac{\gamma }{2} + \sin \frac{\alpha }{2}\sin \frac{\beta }{2}\sin \frac{\gamma }{2}} \\ 
  {\cos \frac{\alpha }{2}*\sin \frac{\beta }{2}*\sin \frac{\gamma }{2} - \sin \frac{\alpha }{2}\sin \frac{\beta }{2}\cos \frac{\gamma }{2}} \\ 
  {\cos \frac{\alpha }{2}*\cos \frac{\beta }{2}*\sin \frac{\gamma }{2} + \sin \frac{\alpha }{2}\cos \frac{\beta }{2}\cos \frac{\gamma }{2}} 
\end{array}} \right]\end{split}\]</div>
<div class="math">
\[\begin{split}\vec {q}_{Fick}  = \left[ {\begin{array}{*{20}{c}}
  {\cos \frac{\psi }{2}*\cos \frac{\phi }{2}*\cos \frac{\theta }{2} + \sin \frac{\psi }{2}\sin \frac{\phi }{2}\sin \frac{\theta }{2}} \\ 
  {\sin \frac{\psi }{2}*\cos \frac{\phi }{2}*\cos \frac{\theta }{2} - \cos \frac{\psi }{2}\sin \frac{\phi }{2}\sin \frac{\theta }{2}} \\ 
  {\cos \frac{\psi }{2}*\sin \frac{\phi }{2}*\cos \frac{\theta }{2} + \sin \frac{\psi }{2}\cos \frac{\phi }{2}\sin \frac{\theta }{2}} \\ 
  {\cos \frac{\psi }{2}*\cos \frac{\phi }{2}*\sin \frac{\theta }{2} - \sin \frac{\psi }{2}\sin \frac{\phi }{2}\cos \frac{\theta }{2}} 
\end{array}} \right]\end{split}\]</div>
<div class="math">
\[\begin{split}\vec {q}_{Helmholtz}  = \left[ {\begin{array}{*{20}{c}}
  {\cos \frac{\psi }{2}*\cos \frac{\phi }{2}*\cos \frac{\theta }{2} - \sin \frac{\psi }{2}\sin \frac{\phi }{2}\sin \frac{\theta }{2}} \\ 
  {\sin \frac{\psi }{2}*\cos \frac{\phi }{2}*\cos \frac{\theta }{2} + \cos \frac{\psi }{2}\sin \frac{\phi }{2}\sin \frac{\theta }{2}} \\ 
  {\cos \frac{\psi }{2}*\sin \frac{\phi }{2}*\cos \frac{\theta }{2} + \sin \frac{\psi }{2}\cos \frac{\phi }{2}\sin \frac{\theta }{2}} \\ 
  {\cos \frac{\psi }{2}*\cos \frac{\phi }{2}*\sin \frac{\theta }{2} - \sin \frac{\psi }{2}\sin \frac{\phi }{2}\cos \frac{\theta }{2}} 
\end{array}} \right]\end{split}\]</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">Quaternion</span><span class="p">(</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.1</span><span class="p">],</span>
<span class="go">                          [0,0,0.2],</span>
<span class="go">                          [0,0,0.5]]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">Quaternion</span><span class="p">(</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.2</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fick</span> <span class="o">=</span> <span class="n">Quaternion</span><span class="p">(</span> <span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span>
<span class="go">                              [0,10,10]]), &#39;Fick&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">combined</span> <span class="o">=</span> <span class="n">p</span> <span class="o">*</span> <span class="n">q</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">divided</span> <span class="o">=</span> <span class="n">q</span> <span class="o">/</span> <span class="n">p</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">extracted</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">values</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inv</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>values</td>
<td>((4 x n) array) quaternion values</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>inv()</td>
<td>Inverse of the quaterion</td>
</tr>
<tr class="row-even"><td>export(to=&#8217;rotmat&#8217;)</td>
<td>Export to one of the following formats: &#8216;rotmat&#8217;, &#8216;Euler&#8217;, &#8216;Fick&#8217;, &#8216;Helmholtz&#8217;</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="quat.Quaternion.export">
<code class="descname">export</code><span class="sig-paren">(</span><em>to='rotmat'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/quat.html#Quaternion.export"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#quat.Quaternion.export" title="Permalink to this definition">¶</a></dt>
<dd><p>Conversion to other formats. May be slow for &#8220;Fick&#8221;, &#8220;Helmholtz&#8221;, and &#8220;Euler&#8221;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>to</strong> : string</p>
<blockquote>
<div><p>content of returned values</p>
<ul class="simple">
<li>&#8216;rotmat&#8217; : rotation matrices (default), each flattened to a 9-dim vector</li>
<li>&#8216;Euler&#8217; : Euler angles</li>
<li>&#8216;Fick&#8217; : Fick angles</li>
<li>&#8216;Helmholtz&#8217; : Helmholtz angles</li>
<li>&#8216;vector&#8217; : vector part of the quaternion</li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">ndarray, with the specified content</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">Quaternion</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mf">0.1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rm</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">export</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fick</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="s1">&#39;Fick&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="quat.Quaternion.inv">
<code class="descname">inv</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/quat.html#Quaternion.inv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#quat.Quaternion.inv" title="Permalink to this definition">¶</a></dt>
<dd><p>Inverse of a quaternion.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="quat.deg2quat">
<code class="descclassname">quat.</code><code class="descname">deg2quat</code><span class="sig-paren">(</span><em>inDeg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/quat.html#deg2quat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#quat.deg2quat" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert axis-angles or plain degree into the corresponding quaternion values.
Can be used with a plain number or with an axis angle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>inDeg</strong> : float or (N,3)</p>
<blockquote>
<div><p>quaternion magnitude or quaternion vectors.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>outQuat</strong> : float or array (N,3)</p>
<blockquote class="last">
<div><p>number or quaternion vector.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<div class="math">
\[| \vec{q} | = sin(\theta/2)\]</div>
<p>More info under 
<a class="reference external" href="http://en.wikipedia.org/wiki/Quaternion">http://en.wikipedia.org/wiki/Quaternion</a></p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">quat</span><span class="o">.</span><span class="n">deg2quat</span><span class="p">(</span><span class="n">array</span><span class="p">([[</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">],</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">40</span><span class="p">]]))</span>
<span class="go">array([[ 0.08715574,  0.17364818,  0.25881905],</span>
<span class="go">   [ 0.17364818,  0.25881905,  0.34202014]])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">quat</span><span class="o">.</span><span class="n">deg2quat</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">0.087155742747658166</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="quat.quat2deg">
<code class="descclassname">quat.</code><code class="descname">quat2deg</code><span class="sig-paren">(</span><em>inQuat</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/quat.html#quat2deg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#quat.quat2deg" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the axis-angle corresponding to a given quaternion.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>inQuat: float, or array_like, shape ([3/4],) or (N,[3/4])</strong></p>
<blockquote>
<div><p>quaternion(s) or quaternion vector(s)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>axAng</strong> : corresponding axis angle(s)</p>
<blockquote class="last">
<div><p>float, or shape (3,) or (N,3)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<div class="math">
\[| \vec{q} | = sin(\theta/2)\]</div>
<p>More info under 
<a class="reference external" href="http://en.wikipedia.org/wiki/Quaternion">http://en.wikipedia.org/wiki/Quaternion</a></p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">quat</span><span class="o">.</span><span class="n">quat2deg</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
<span class="go">array([ 11.47834095])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">quat</span><span class="o">.</span><span class="n">quat2deg</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="go">array([ 11.47834095,  11.47834095,   0.        ])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">quat</span><span class="o">.</span><span class="n">quat2deg</span><span class="p">([</span><span class="n">cos</span><span class="p">(</span><span class="mf">0.1</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">sin</span><span class="p">(</span><span class="mf">0.1</span><span class="p">),</span> <span class="mi">0</span><span class="p">])</span>
<span class="go">array([  0.       ,  11.4591559,   0.       ])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="quat.quat2rotmat">
<code class="descclassname">quat.</code><code class="descname">quat2rotmat</code><span class="sig-paren">(</span><em>inQuat</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/quat.html#quat2rotmat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#quat.quat2rotmat" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the rotation matrix corresponding to the quaternion. If
&#8220;inQuat&#8221; contains more than one quaternion, the matrix is flattened (to
facilitate the work with rows of quaternions), and can be restored to
matrix form by &#8220;reshaping&#8221; the resulting rows into a (3,3) shape.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>inQuat</strong> : array_like, shape ([3,4],) or (N,[3,4])</p>
<blockquote>
<div><p>quaternions or quaternion vectors</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>rotMat</strong> : corresponding rotation matrix/matrices (flattened)</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<div class="math">
\[\begin{split}{\bf{R}} = \left( {\begin{array}{*{20}{c}}
{q_0^2 + q_1^2 - q_2^2 - q_3^2}&amp;{2({q_1}{q_2} - {q_0}{q_3})}&amp;{2({q_1}{q_3} + {q_0}{q_2})}\\
{2({q_1}{q_2} + {q_0}{q_3})}&amp;{q_0^2 - q_1^2 + q_2^2 - q_3^2}&amp;{2({q_2}{q_3} - {q_0}{q_1})}\\
{2({q_1}{q_3} - {q_0}{q_2})}&amp;{2({q_2}{q_3} + {q_0}{q_1})}&amp;{q_0^2 - q_1^2 - q_2^2 + q_3^2} \\
\end{array}} \right)\end{split}\]</div>
<p>More info under 
<a class="reference external" href="http://en.wikipedia.org/wiki/Quaternion">http://en.wikipedia.org/wiki/Quaternion</a></p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">quat</span><span class="o">.</span><span class="n">quat2rotmat</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(1, 9)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="go">array([[ 0.98      , -0.19899749,  0.        ],</span>
<span class="go">    [ 0.19899749,  0.98      ,  0.        ],</span>
<span class="go">    [ 0.        ,  0.        ,  1.        ]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="quat.quat2vect">
<code class="descclassname">quat.</code><code class="descname">quat2vect</code><span class="sig-paren">(</span><em>inQuat</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/quat.html#quat2vect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#quat.quat2vect" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the quaternion vector from a full quaternion.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>inQuat</strong> : array_like, shape ([3,4],) or (N,[3,4])</p>
<blockquote>
<div><p>quaternions or quaternion vectors.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>vect</strong> : array, shape (3,) or (N,3)</p>
<blockquote class="last">
<div><p>corresponding quaternion vectors</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>More info under 
<a class="reference external" href="http://en.wikipedia.org/wiki/Quaternion">http://en.wikipedia.org/wiki/Quaternion</a></p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">quat</span><span class="o">.</span><span class="n">quat2vect</span><span class="p">([[</span><span class="n">cos</span><span class="p">(</span><span class="mf">0.2</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">sin</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)],[</span><span class="n">cos</span><span class="p">(</span><span class="mf">0.1</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">sin</span><span class="p">(</span><span class="mf">0.1</span><span class="p">),</span> <span class="mi">0</span><span class="p">]])</span>
<span class="go">array([[ 0.        ,  0.        ,  0.19866933],</span>
<span class="go">       [ 0.        ,  0.09983342,  0.        ]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="quat.quat2vel">
<code class="descclassname">quat.</code><code class="descname">quat2vel</code><span class="sig-paren">(</span><em>q</em>, <em>rate=1</em>, <em>winSize=5</em>, <em>order=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/quat.html#quat2vel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#quat.quat2vel" title="Permalink to this definition">¶</a></dt>
<dd><p>Take a quaternion, and convert it into the
corresponding angular velocity</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>q</strong> : array, shape (N,[3,4])</p>
<blockquote>
<div><p>unit quaternion vectors.</p>
</div></blockquote>
<p><strong>rate</strong> : float</p>
<blockquote>
<div><p>sampling rate (in [Hz])</p>
</div></blockquote>
<p><strong>winSize</strong> : integer</p>
<blockquote>
<div><p>window size for the calculation of the velocity.
Has to be odd.</p>
</div></blockquote>
<p><strong>order</strong> : integer</p>
<blockquote>
<div><p>Order of polynomial used by savgol to calculate the first derivative</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>vel</strong> : array, shape (3,) or (N,3)</p>
<blockquote class="last">
<div><p>angular velocity [rad/s].</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The angular velocity is given by</p>
<blockquote>
<div><div class="math">
\[\omega = 2 * \frac{dq}{dt} \circ q^{-1}\]</div>
</div></blockquote>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rate</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="o">/</span><span class="n">rate</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="go">array([[ 0.20000029,  0.40000057,  0.        ],</span>
<span class="go">       [ 0.19999989,  0.39999978,  0.        ],</span>
<span class="go">       [ 0.19999951,  0.39999901,  0.        ]])</span>
<span class="go">        .......</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="quat.quatconj">
<code class="descclassname">quat.</code><code class="descname">quatconj</code><span class="sig-paren">(</span><em>q</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/quat.html#quatconj"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#quat.quatconj" title="Permalink to this definition">¶</a></dt>
<dd><p>Conjugate quaternion</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>q: array_like, shape ([3,4],) or (N,[3/4])</strong></p>
<blockquote>
<div><p>quaternion or quaternion vectors</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>qconj</strong> : conjugate quaternion(s)</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span> <span class="n">quat</span><span class="o">.</span><span class="n">quatconj</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.1</span><span class="p">])</span>
<span class="go">array([ 0., -0., -0., -1.])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">quat</span><span class="o">.</span><span class="n">quatconj</span><span class="p">([[</span><span class="n">cos</span><span class="p">(</span><span class="mf">0.1</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">sin</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)],</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="p">[</span><span class="n">cos</span><span class="p">(</span><span class="mf">0.2</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">sin</span><span class="p">(</span><span class="mf">0.2</span><span class="p">),</span> <span class="mi">0</span><span class="p">]])</span>
<span class="go">array([[ 0.99500417, -0.        , -0.        , -0.09983342],</span>
<span class="go">       [ 0.98006658, -0.        , -0.19866933, -0.        ]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="quat.quatinv">
<code class="descclassname">quat.</code><code class="descname">quatinv</code><span class="sig-paren">(</span><em>q</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/quat.html#quatinv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#quat.quatinv" title="Permalink to this definition">¶</a></dt>
<dd><p>Quaternion inversion</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>q: array_like, shape ([3,4],) or (N,[3/4])</strong></p>
<blockquote>
<div><p>quaternion or quaternion vectors</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>qinv</strong> : inverse quaternion(s)</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<div class="math">
\[q^{-1} = \frac{q_0 - \vec{q}}{|q|^2}\]</div>
<p>More info under 
<a class="reference external" href="http://en.wikipedia.org/wiki/Quaternion">http://en.wikipedia.org/wiki/Quaternion</a></p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span> <span class="n">quat</span><span class="o">.</span><span class="n">quatinv</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.1</span><span class="p">])</span>
<span class="go">array([[-0. , -0. , -0.1]])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">quat</span><span class="o">.</span><span class="n">quatinv</span><span class="p">([[</span><span class="n">cos</span><span class="p">(</span><span class="mf">0.1</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">sin</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">cos</span><span class="p">(</span><span class="mf">0.2</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="n">sin</span><span class="p">(</span><span class="mf">0.2</span><span class="p">),</span><span class="mi">0</span><span class="p">]])</span>
<span class="go">array([[ 0.99500417, -0.        , -0.        , -0.09983342],</span>
<span class="go">       [ 0.98006658, -0.        , -0.19866933, -0.        ]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="quat.quatmult">
<code class="descclassname">quat.</code><code class="descname">quatmult</code><span class="sig-paren">(</span><em>p</em>, <em>q</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/quat.html#quatmult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#quat.quatmult" title="Permalink to this definition">¶</a></dt>
<dd><p>Quaternion multiplication: Calculates the product of two quaternions r = p * q
If one of both of the quaterions have only three columns,
the scalar component is calculated such that the length
of the quaternion is one.
The lengths of the quaternions have to match, or one of
the two quaternions has to have the length one.
If both p and q only have 3 components, the returned quaternion
also only has 3 components (i.e. the quaternion vector)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>p,q</strong> : array_like, shape ([3,4],) or (N,[3,4])</p>
<blockquote>
<div><p>quaternions or quaternion vectors</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>r</strong> : quaternion or quaternion vector (if both</p>
<blockquote class="last">
<div><p>p and q are contain quaternion vectors).</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<div class="math">
\[q \circ p = \sum\limits_{i=0}^3 {q_i I_i} * \sum\limits_{j=0}^3 \
{p_j I_j} = (q_0 p_0 - \vec{q} \cdot \vec{p}) + (q_0 \vec{p} + p_0 \
\vec{q} + \vec{q} \times \vec{p}) \cdot \vec{I}\]</div>
<p>More info under 
<a class="reference external" href="http://en.wikipedia.org/wiki/Quaternion">http://en.wikipedia.org/wiki/Quaternion</a></p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="p">[</span><span class="n">cos</span><span class="p">(</span><span class="mf">0.2</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">sin</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">quat</span><span class="o">.</span><span class="n">quatmult</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">q</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="quat.rotmat2quat">
<code class="descclassname">quat.</code><code class="descname">rotmat2quat</code><span class="sig-paren">(</span><em>rMat</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/quat.html#rotmat2quat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#quat.rotmat2quat" title="Permalink to this definition">¶</a></dt>
<dd><p>Assumes that R has the shape (3,3), or the matrix elements in columns</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>rMat</strong> : array, shape (3,3) or (N,9)</p>
<blockquote>
<div><p>single rotation matrix, or matrix with rotation-matrix elements.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>outQuat</strong> : array, shape (4,) or (N,4)</p>
<blockquote class="last">
<div><p>corresponding quaternion vector(s)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<div class="math">
\[\begin{split}\vec q = 0.5*copysign\left( {\begin{array}{*{20}{c}}
{\sqrt {1 + {R_{11}} - {R_{22}} - {R_{33}}} ,}\\
{\sqrt {1 - {R_{11}} + {R_{22}} - {R_{33}}} ,}\\
{\sqrt {1 - {R_{11}} - {R_{22}} + {R_{33}}} ,}
\end{array}\begin{array}{*{20}{c}}
{{R_{32}} - {R_{23}}}\\
{{R_{13}} - {R_{31}}}\\
{{R_{21}} - {R_{12}}}
\end{array}} \right) \end{split}\]</div>
<p>More info under 
<a class="reference external" href="http://en.wikipedia.org/wiki/Quaternion">http://en.wikipedia.org/wiki/Quaternion</a></p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rotMat</span> <span class="o">=</span> <span class="n">array</span><span class="p">([[</span><span class="n">cos</span><span class="p">(</span><span class="n">alpha</span><span class="p">),</span> <span class="o">-</span><span class="n">sin</span><span class="p">(</span><span class="n">alpha</span><span class="p">),</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="p">[</span><span class="n">sin</span><span class="p">(</span><span class="n">alpha</span><span class="p">),</span> <span class="n">cos</span><span class="p">(</span><span class="n">alpha</span><span class="p">),</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">quat</span><span class="o">.</span><span class="n">rotmat2quat</span><span class="p">(</span><span class="n">rotMat</span><span class="p">)</span>
<span class="go">array([[ 0.99500417,  0.        ,  0.        ,  0.09983342]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="quat.vect2quat">
<code class="descclassname">quat.</code><code class="descname">vect2quat</code><span class="sig-paren">(</span><em>inData</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/quat.html#vect2quat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#quat.vect2quat" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility function, which turns a quaternion vector into a unit quaternion.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>inData</strong> : array_like, shape (3,) or (N,3)</p>
<blockquote>
<div><p>quaternions or quaternion vectors</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>quats</strong> : array, shape (4,) or (N,4)</p>
<blockquote class="last">
<div><p>corresponding unit quaternions.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>More info under 
<a class="reference external" href="http://en.wikipedia.org/wiki/Quaternion">http://en.wikipedia.org/wiki/Quaternion</a></p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">quats</span> <span class="o">=</span> <span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="n">sin</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)],[</span><span class="mi">0</span><span class="p">,</span> <span class="n">sin</span><span class="p">(</span><span class="mf">0.2</span><span class="p">),</span> <span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">quat</span><span class="o">.</span><span class="n">vect2quat</span><span class="p">(</span><span class="n">quats</span><span class="p">)</span>
<span class="go">array([[ 0.99500417,  0.        ,  0.        ,  0.09983342],</span>
<span class="go">       [ 0.98006658,  0.        ,  0.19866933,  0.        ]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="quat.vel2quat">
<code class="descclassname">quat.</code><code class="descname">vel2quat</code><span class="sig-paren">(</span><em>omega</em>, <em>q0</em>, <em>rate</em>, <em>CStype</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/quat.html#vel2quat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#quat.vel2quat" title="Permalink to this definition">¶</a></dt>
<dd><p>Take an angular velocity (in rad/s), and convert it into the
corresponding orientation quaternion.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>omega</strong> : array, shape (3,) or (N,3)</p>
<blockquote>
<div><p>angular velocity [rad/s].</p>
</div></blockquote>
<p><strong>q0</strong> : array (3,)</p>
<blockquote>
<div><p>vector-part of quaternion (!!)</p>
</div></blockquote>
<p><strong>rate</strong> : float</p>
<blockquote>
<div><p>sampling rate (in [Hz])</p>
</div></blockquote>
<p><strong>CStype:  string</strong></p>
<blockquote>
<div><p>coordinate_system, space-fixed (&#8220;sf&#8221;) or body_fixed (&#8220;bf&#8221;)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>quats</strong> : array, shape (N,4)</p>
<blockquote class="last">
<div><p>unit quaternion vectors.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ol class="arabic simple">
<li>The output has the same length as the input. As a consequence, the last velocity vector is ignored.</li>
<li>For angular velocity with respect to space (&#8220;sf&#8221;), the orientation is given by</li>
</ol>
<blockquote>
<div><div class="math">
\[q(t) = \Delta q(t_n) \circ \Delta q(t_{n-1}) \circ ... \circ \Delta q(t_2) \circ \Delta q(t_1) \circ q(t_0)\]</div>
<div class="math">
\[\Delta \vec{q_i} = \vec{n(t)}\sin (\frac{\Delta \phi (t_i)}{2}) = \frac{\vec \omega (t_i)}{\left| {\vec \omega (t_i)} \right|}\sin \left( \frac{\left| {\vec \omega ({t_i})} \right|\Delta t}{2} \right)\]</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>For angular velocity with respect to the body (&#8220;bf&#8221;), the sequence of quaternions is inverted.</li>
<li>Take care that you choose a high enough sampling rate!</li>
</ol>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">v0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">100.</span><span class="p">]</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mf">180.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">omega</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">v0</span><span class="p">,</span> <span class="p">(</span><span class="mi">1000</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rate</span> <span class="o">=</span> <span class="mi">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out</span> <span class="o">=</span> <span class="n">quat</span><span class="o">.</span><span class="n">vel2quat</span><span class="p">(</span><span class="n">omega</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span> <span class="n">rate</span><span class="p">,</span> <span class="s1">&#39;sf&#39;</span><span class="p">)</span>
<span class="go">array([[ 1.        ,  0.        ,  0.        ,  0.        ],</span>
<span class="go">   [ 0.99996192,  0.        ,  0.        ,  0.00872654],</span>
<span class="go">   [ 0.9998477 ,  0.        ,  0.        ,  0.01745241],</span>
<span class="go">   ..., </span>
<span class="go">   [-0.74895572,  0.        ,  0.        ,  0.66262005],</span>
<span class="go">   [-0.75470958,  0.        ,  0.        ,  0.65605903],</span>
<span class="go">   [-0.76040597,  0.        ,  0.        ,  0.64944805]])</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/thLib.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Quaternions</a><ul>
<li><a class="reference internal" href="#quaternion-class">Quaternion class</a></li>
<li><a class="reference internal" href="#functions-for-working-with-quaternions">Functions for working with quaternions</a></li>
<li><a class="reference internal" href="#conversion-routines">Conversion routines</a></li>
<li><a class="reference internal" href="#module-quat">Details</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">thLib - Documentation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="rotmat.html"
                        title="next chapter">Rotation Matrices</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/quat.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="rotmat.html" title="Rotation Matrices"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="thLib - Documentation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">thLib 0.11.6 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, thomas haslwanter.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.5.
    </div>
  </body>
</html>