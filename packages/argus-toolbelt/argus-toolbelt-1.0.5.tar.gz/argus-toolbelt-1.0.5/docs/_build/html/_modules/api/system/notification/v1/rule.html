
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>api.system.notification.v1.rule &#8212; Argus-Toolbelt 1.0 documentation</title>
    <link rel="stylesheet" href="../../../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for api.system.notification.v1.rule</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Autogenerated API&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">argus_cli.plugin</span> <span class="k">import</span> <span class="n">register_command</span>


<div class="viewcode-block" id="list"><a class="viewcode-back" href="../../../../../api/api.system.notification.v1.html#api.system.notification.v1.rule.list">[docs]</a><span class="nd">@register_command</span><span class="p">(</span><span class="n">extending</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;system&#39;</span><span class="p">,</span><span class="s1">&#39;notification&#39;</span><span class="p">,</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span><span class="s1">&#39;rule&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="n">includeDeleted</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">includeFlags</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">excludeFlags</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">customerID</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">includeGlobal</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">events</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span><span class="n">json</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">authentication</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;List notification rules (INTERNAL)</span>

<span class="sd">    </span>

<span class="sd">    :param bool includeDeleted: Include deleted rules</span>
<span class="sd">    :param int includeFlags: Limit result to rules with these flagbits set</span>
<span class="sd">    :param int excludeFlags: Limit result to rules with these flagbits unset</span>
<span class="sd">    :param list customerID: Limit result to rules for these customers</span>
<span class="sd">    :param bool includeGlobal: Include global rules</span>
<span class="sd">    :param int offset: Offset result</span>
<span class="sd">    :param list events: Limit result to rules for these events</span>
<span class="sd">    :param int limit: Limit result</span>
<span class="sd">    :raises AuthenticationFailedException: on 401</span>
<span class="sd">    :raises ValidationErrorException: on 412</span>
<span class="sd">    :raises AccessDeniedException: on 403</span>
<span class="sd">    :returns: {&quot;offset&quot;: 493, &quot;limit&quot;: 855, &quot;responseCode&quot;: 200, &quot;count&quot;: 157, &quot;data&quot;: [{&quot;id&quot;: 816, &quot;revision&quot;: 776, &quot;name&quot;: &quot;Dale Vasquez&quot;, &quot;matchRule&quot;: &quot;Subject coach cover use.&quot;, &quot;index&quot;: 625, &quot;flags&quot;: 878, &quot;actions&quot;: [{&quot;changeMatching&quot;: &quot;Far around item international.&quot;, &quot;changeTypes&quot;: [&quot;SMS&quot;], &quot;changeFormats&quot;: [&quot;BRIEF&quot;], &quot;changeRoles&quot;: [&quot;CC&quot;], &quot;sender&quot;: &quot;Fund development on stand food.&quot;, &quot;setFlags&quot;: 522, &quot;unsetFlags&quot;: 502, &quot;subjectTemplate&quot;: {&quot;additionalProperties&quot;: &quot;Everybody window service issue law.&quot;}, &quot;bodyTemplate&quot;: {&quot;additionalProperties&quot;: &quot;Point note development word happy several sense candidate.&quot;}, &quot;smsTemplate&quot;: {&quot;additionalProperties&quot;: &quot;Marriage determine military need produce doctor.&quot;}}], &quot;additionalDestinations&quot;: [{&quot;role&quot;: &quot;REPORTER&quot;, &quot;name&quot;: &quot;Anna Maxwell&quot;, &quot;destination&quot;: &quot;Such able character partner.&quot;, &quot;language&quot;: &quot;ENGLISH&quot;, &quot;flags&quot;: 929}], &quot;timestamp&quot;: 1220646578, &quot;lastUpdatedTimestamp&quot;: 563527190, &quot;lastUpdatedByUser&quot;: {&quot;id&quot;: 176, &quot;customerID&quot;: 699, &quot;userName&quot;: &quot;nicholassexton&quot;, &quot;name&quot;: &quot;Crystal Baker&quot;}, &quot;events&quot;: [&quot;Lay toward may feeling floor cost certain.&quot;], &quot;globalCustomer&quot;: false}], &quot;metaData&quot;: {&quot;additionalProperties&quot;: {}}, &quot;messages&quot;: [{&quot;message&quot;: &quot;Sure kind cut central board Democrat whom.&quot;, &quot;messageTemplate&quot;: &quot;Stop break theory support work feel hair month.&quot;, &quot;field&quot;: &quot;Fall report partner on true book.&quot;, &quot;parameter&quot;: {}, &quot;timestamp&quot;: 460088021}], &quot;currentPage&quot;: 932, &quot;size&quot;: 19} </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">requests</span> <span class="k">import</span> <span class="n">get</span>
    <span class="kn">from</span> <span class="nn">argus_api.exceptions</span> <span class="k">import</span> <span class="n">http</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://osl-argus-trunk-web1.mnemonic.no/web/api/system/notification/v1/rule&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">()</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;ArgusToolbelt/1.0&#39;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">apiKey</span><span class="p">:</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Argus-API-Key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">apiKey</span>
    <span class="k">elif</span> <span class="n">authentication</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">authentication</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">callable</span><span class="p">(</span><span class="n">authentication</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>

    <span class="n">body</span> <span class="o">=</span> <span class="p">{}</span>
    
    <span class="k">if</span> <span class="n">limit</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="n">limit</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">includeDeleted</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;includeDeleted&quot;</span><span class="p">:</span> <span class="n">includeDeleted</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">includeFlags</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;includeFlags&quot;</span><span class="p">:</span> <span class="n">includeFlags</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">excludeFlags</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;excludeFlags&quot;</span><span class="p">:</span> <span class="n">excludeFlags</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">customerID</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;customerID&quot;</span><span class="p">:</span> <span class="n">customerID</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">includeGlobal</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;includeGlobal&quot;</span><span class="p">:</span> <span class="n">includeGlobal</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">offset</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;offset&quot;</span><span class="p">:</span> <span class="n">offset</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">events</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;events&quot;</span><span class="p">:</span> <span class="n">events</span><span class="p">})</span>


    <span class="n">response</span> <span class="o">=</span> <span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span> <span class="k">if</span> <span class="n">body</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">verify</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AuthenticationFailedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AccessDeniedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">412</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ValidationErrorException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ObjectNotFoundException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="k">if</span> <span class="n">json</span> <span class="k">else</span> <span class="n">response</span></div>

<div class="viewcode-block" id="create"><a class="viewcode-back" href="../../../../../api/api.system.notification.v1.html#api.system.notification.v1.rule.create">[docs]</a><span class="nd">@register_command</span><span class="p">(</span><span class="n">extending</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;system&#39;</span><span class="p">,</span><span class="s1">&#39;notification&#39;</span><span class="p">,</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span><span class="s1">&#39;rule&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">matchRule</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">customerID</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">setFlags</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">actions</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">additionalDestinations</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">events</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span><span class="n">json</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">authentication</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add notification rule (INTERNAL)</span>

<span class="sd">    </span>

<span class="sd">    :param str name: Notification rule name  =&gt; [\s\w\{\}\$\-\(\)\.\[\]&quot;\&#39;_/\\,\*\+\#:@!?;]*</span>
<span class="sd">    :param str matchRule: </span>
<span class="sd">    :param int customerID: </span>
<span class="sd">    :param int setFlags: </span>
<span class="sd">    :param list actions: Actions </span>
<span class="sd">    :param list additionalDestinations: </span>
<span class="sd">    :param list events: </span>
<span class="sd">    :param int index: index (default 0)</span>
<span class="sd">    :raises AuthenticationFailedException: on 401</span>
<span class="sd">    :raises ValidationErrorException: on 412</span>
<span class="sd">    :raises AccessDeniedException: on 403</span>
<span class="sd">    :returns: {&quot;offset&quot;: 420, &quot;limit&quot;: 543, &quot;responseCode&quot;: 200, &quot;count&quot;: 994, &quot;metaData&quot;: {&quot;additionalProperties&quot;: {}}, &quot;messages&quot;: [{&quot;message&quot;: &quot;Model personal behavior manage see.&quot;, &quot;messageTemplate&quot;: &quot;Product staff must nothing.&quot;, &quot;field&quot;: &quot;Western west heart board.&quot;, &quot;parameter&quot;: {}, &quot;timestamp&quot;: 184548869}], &quot;currentPage&quot;: 542, &quot;size&quot;: 768} </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">requests</span> <span class="k">import</span> <span class="n">post</span>
    <span class="kn">from</span> <span class="nn">argus_api.exceptions</span> <span class="k">import</span> <span class="n">http</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://osl-argus-trunk-web1.mnemonic.no/web/api/system/notification/v1/rule&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">()</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;ArgusToolbelt/1.0&#39;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">apiKey</span><span class="p">:</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Argus-API-Key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">apiKey</span>
    <span class="k">elif</span> <span class="n">authentication</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">authentication</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">callable</span><span class="p">(</span><span class="n">authentication</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>

    <span class="n">body</span> <span class="o">=</span> <span class="p">{}</span>
    
    <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">matchRule</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;matchRule&quot;</span><span class="p">:</span> <span class="n">matchRule</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">customerID</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;customerID&quot;</span><span class="p">:</span> <span class="n">customerID</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">index</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="n">index</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">setFlags</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;setFlags&quot;</span><span class="p">:</span> <span class="n">setFlags</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">actions</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="n">actions</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">additionalDestinations</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;additionalDestinations&quot;</span><span class="p">:</span> <span class="n">additionalDestinations</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">events</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;events&quot;</span><span class="p">:</span> <span class="n">events</span><span class="p">})</span>


    <span class="n">response</span> <span class="o">=</span> <span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span> <span class="k">if</span> <span class="n">body</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">verify</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AuthenticationFailedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AccessDeniedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">412</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ValidationErrorException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ObjectNotFoundException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="k">if</span> <span class="n">json</span> <span class="k">else</span> <span class="n">response</span></div>

<div class="viewcode-block" id="get_rule_by_id"><a class="viewcode-back" href="../../../../../api/api.system.notification.v1.html#api.system.notification.v1.rule.get_rule_by_id">[docs]</a><span class="nd">@register_command</span><span class="p">(</span><span class="n">extending</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;system&#39;</span><span class="p">,</span><span class="s1">&#39;notification&#39;</span><span class="p">,</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span><span class="s1">&#39;rule&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">get_rule_by_id</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span><span class="n">json</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">authentication</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Fetch notification rule (INTERNAL)</span>

<span class="sd">    </span>

<span class="sd">    :param int id: ID of rule to fetch</span>
<span class="sd">    :raises AuthenticationFailedException: on 401</span>
<span class="sd">    :raises ValidationErrorException: on 412</span>
<span class="sd">    :raises AccessDeniedException: on 403</span>
<span class="sd">    :raises ObjectNotFoundException: on 404</span>
<span class="sd">    :returns: {&quot;offset&quot;: 225, &quot;limit&quot;: 168, &quot;responseCode&quot;: 200, &quot;count&quot;: 755, &quot;metaData&quot;: {&quot;additionalProperties&quot;: {}}, &quot;messages&quot;: [{&quot;message&quot;: &quot;Day measure focus air when free imagine.&quot;, &quot;messageTemplate&quot;: &quot;Who north money every though.&quot;, &quot;field&quot;: &quot;Successful indeed serve respond increase.&quot;, &quot;parameter&quot;: {}, &quot;timestamp&quot;: 846158952}], &quot;currentPage&quot;: 277, &quot;size&quot;: 619} </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">requests</span> <span class="k">import</span> <span class="n">get</span>
    <span class="kn">from</span> <span class="nn">argus_api.exceptions</span> <span class="k">import</span> <span class="n">http</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://osl-argus-trunk-web1.mnemonic.no/web/api/system/notification/v1/rule/</span><span class="si">{id}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;ArgusToolbelt/1.0&#39;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">apiKey</span><span class="p">:</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Argus-API-Key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">apiKey</span>
    <span class="k">elif</span> <span class="n">authentication</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">authentication</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">callable</span><span class="p">(</span><span class="n">authentication</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>

    <span class="n">body</span> <span class="o">=</span> <span class="p">{}</span>
    

    <span class="n">response</span> <span class="o">=</span> <span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span> <span class="k">if</span> <span class="n">body</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">verify</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AuthenticationFailedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AccessDeniedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">412</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ValidationErrorException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ObjectNotFoundException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="k">if</span> <span class="n">json</span> <span class="k">else</span> <span class="n">response</span></div>

<div class="viewcode-block" id="update_rule"><a class="viewcode-back" href="../../../../../api/api.system.notification.v1.html#api.system.notification.v1.rule.update_rule">[docs]</a><span class="nd">@register_command</span><span class="p">(</span><span class="n">extending</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;system&#39;</span><span class="p">,</span><span class="s1">&#39;notification&#39;</span><span class="p">,</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span><span class="s1">&#39;rule&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">update_rule</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">matchRule</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">setFlags</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">unsetFlags</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">actions</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">additionalDestinations</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">events</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span><span class="n">json</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">authentication</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Update notification rule (INTERNAL)</span>

<span class="sd">    </span>

<span class="sd">    :param int id: ID of rule to update</span>
<span class="sd">    :param str name: [\s\w\{\}\$\-\(\)\.\[\]&quot;\&#39;_/\\,\*\+\#:@!?;]*</span>
<span class="sd">    :param str matchRule: </span>
<span class="sd">    :param int index: index (default null)</span>
<span class="sd">    :param int setFlags: </span>
<span class="sd">    :param int unsetFlags: </span>
<span class="sd">    :param list actions: </span>
<span class="sd">    :param list additionalDestinations: </span>
<span class="sd">    :param list events: </span>
<span class="sd">    :raises AuthenticationFailedException: on 401</span>
<span class="sd">    :raises ValidationErrorException: on 412</span>
<span class="sd">    :raises AccessDeniedException: on 403</span>
<span class="sd">    :raises ObjectNotFoundException: on 404</span>
<span class="sd">    :returns: {&quot;offset&quot;: 373, &quot;limit&quot;: 110, &quot;responseCode&quot;: 200, &quot;count&quot;: 214, &quot;metaData&quot;: {&quot;additionalProperties&quot;: {}}, &quot;messages&quot;: [{&quot;message&quot;: &quot;Across response entire mouth.&quot;, &quot;messageTemplate&quot;: &quot;Common reach individual them above.&quot;, &quot;field&quot;: &quot;Them benefit plant or best result game nor.&quot;, &quot;parameter&quot;: {}, &quot;timestamp&quot;: 1171381760}], &quot;currentPage&quot;: 594, &quot;size&quot;: 829} </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">requests</span> <span class="k">import</span> <span class="n">put</span>
    <span class="kn">from</span> <span class="nn">argus_api.exceptions</span> <span class="k">import</span> <span class="n">http</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://osl-argus-trunk-web1.mnemonic.no/web/api/system/notification/v1/rule/</span><span class="si">{id}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;ArgusToolbelt/1.0&#39;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">apiKey</span><span class="p">:</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Argus-API-Key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">apiKey</span>
    <span class="k">elif</span> <span class="n">authentication</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">authentication</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">callable</span><span class="p">(</span><span class="n">authentication</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>

    <span class="n">body</span> <span class="o">=</span> <span class="p">{}</span>
    
    <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">matchRule</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;matchRule&quot;</span><span class="p">:</span> <span class="n">matchRule</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">index</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="n">index</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">setFlags</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;setFlags&quot;</span><span class="p">:</span> <span class="n">setFlags</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">unsetFlags</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;unsetFlags&quot;</span><span class="p">:</span> <span class="n">unsetFlags</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">actions</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="n">actions</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">additionalDestinations</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;additionalDestinations&quot;</span><span class="p">:</span> <span class="n">additionalDestinations</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">events</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;events&quot;</span><span class="p">:</span> <span class="n">events</span><span class="p">})</span>


    <span class="n">response</span> <span class="o">=</span> <span class="n">put</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span> <span class="k">if</span> <span class="n">body</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">verify</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AuthenticationFailedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AccessDeniedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">412</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ValidationErrorException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ObjectNotFoundException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="k">if</span> <span class="n">json</span> <span class="k">else</span> <span class="n">response</span></div>

<div class="viewcode-block" id="delete_rule"><a class="viewcode-back" href="../../../../../api/api.system.notification.v1.html#api.system.notification.v1.rule.delete_rule">[docs]</a><span class="nd">@register_command</span><span class="p">(</span><span class="n">extending</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;system&#39;</span><span class="p">,</span><span class="s1">&#39;notification&#39;</span><span class="p">,</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span><span class="s1">&#39;rule&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">delete_rule</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span><span class="n">json</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">authentication</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Delete notification rule (INTERNAL)</span>

<span class="sd">    </span>

<span class="sd">    :param int id: ID of rule to delete</span>
<span class="sd">    :raises AuthenticationFailedException: on 401</span>
<span class="sd">    :raises ValidationErrorException: on 412</span>
<span class="sd">    :raises AccessDeniedException: on 403</span>
<span class="sd">    :raises ObjectNotFoundException: on 404</span>
<span class="sd">    :returns: {&quot;offset&quot;: 925, &quot;limit&quot;: 32, &quot;responseCode&quot;: 200, &quot;count&quot;: 22, &quot;metaData&quot;: {&quot;additionalProperties&quot;: {}}, &quot;messages&quot;: [{&quot;message&quot;: &quot;Open task point certainly wait recently answer history.&quot;, &quot;messageTemplate&quot;: &quot;Color television then story short hour expert activity.&quot;, &quot;field&quot;: &quot;Sometimes campaign beat.&quot;, &quot;parameter&quot;: {}, &quot;timestamp&quot;: 523034430}], &quot;currentPage&quot;: 547, &quot;size&quot;: 793} </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">requests</span> <span class="k">import</span> <span class="n">delete</span>
    <span class="kn">from</span> <span class="nn">argus_api.exceptions</span> <span class="k">import</span> <span class="n">http</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://osl-argus-trunk-web1.mnemonic.no/web/api/system/notification/v1/rule/</span><span class="si">{id}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;ArgusToolbelt/1.0&#39;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">apiKey</span><span class="p">:</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Argus-API-Key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">apiKey</span>
    <span class="k">elif</span> <span class="n">authentication</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">authentication</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">callable</span><span class="p">(</span><span class="n">authentication</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>

    <span class="n">body</span> <span class="o">=</span> <span class="p">{}</span>
    

    <span class="n">response</span> <span class="o">=</span> <span class="n">delete</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span> <span class="k">if</span> <span class="n">body</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">verify</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AuthenticationFailedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AccessDeniedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">412</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ValidationErrorException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ObjectNotFoundException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="k">if</span> <span class="n">json</span> <span class="k">else</span> <span class="n">response</span></div>

<div class="viewcode-block" id="add_action"><a class="viewcode-back" href="../../../../../api/api.system.notification.v1.html#api.system.notification.v1.rule.add_action">[docs]</a><span class="nd">@register_command</span><span class="p">(</span><span class="n">extending</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;system&#39;</span><span class="p">,</span><span class="s1">&#39;notification&#39;</span><span class="p">,</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span><span class="s1">&#39;rule&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">add_action</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">changeMatching</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">changeTypes</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">changeFormats</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">changeRoles</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">sender</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">setFlags</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">unsetFlags</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">subjectTemplate</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">bodyTemplate</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">smsTemplate</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span><span class="n">json</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">authentication</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add notification action to rule (INTERNAL)</span>

<span class="sd">    </span>

<span class="sd">    :param int id: ID of rule to add this action to</span>
<span class="sd">    :param int index: Index to put this action at</span>
<span class="sd">    :param str changeMatching: [\s\w\{\}\$\-\(\)\.\[\]&quot;\&#39;_/\\,\*\+\#:@!?;]*</span>
<span class="sd">    :param list changeTypes: </span>
<span class="sd">    :param list changeFormats: </span>
<span class="sd">    :param list changeRoles: </span>
<span class="sd">    :param str sender: </span>
<span class="sd">    :param int setFlags: </span>
<span class="sd">    :param int unsetFlags: </span>
<span class="sd">    :param dict subjectTemplate: format:html</span>
<span class="sd">    :param dict bodyTemplate: format:html</span>
<span class="sd">    :param dict smsTemplate: [\s\w\{\}\$\-\(\)\.\[\]&quot;\&#39;_/\\,\*\+\#:@!?;]*</span>
<span class="sd">    :raises AuthenticationFailedException: on 401</span>
<span class="sd">    :raises ValidationErrorException: on 412</span>
<span class="sd">    :raises AccessDeniedException: on 403</span>
<span class="sd">    :raises ObjectNotFoundException: on 404</span>
<span class="sd">    :returns: {&quot;offset&quot;: 902, &quot;limit&quot;: 347, &quot;responseCode&quot;: 200, &quot;count&quot;: 555, &quot;metaData&quot;: {&quot;additionalProperties&quot;: {}}, &quot;messages&quot;: [{&quot;message&quot;: &quot;Participant best defense crime run.&quot;, &quot;messageTemplate&quot;: &quot;Though night fear region eight event.&quot;, &quot;field&quot;: &quot;Report popular seek policy hand stock themselves.&quot;, &quot;parameter&quot;: {}, &quot;timestamp&quot;: 55564098}], &quot;currentPage&quot;: 80, &quot;size&quot;: 13} </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">requests</span> <span class="k">import</span> <span class="n">post</span>
    <span class="kn">from</span> <span class="nn">argus_api.exceptions</span> <span class="k">import</span> <span class="n">http</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://osl-argus-trunk-web1.mnemonic.no/web/api/system/notification/v1/rule/</span><span class="si">{id}</span><span class="s2">/actions/</span><span class="si">{index}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;ArgusToolbelt/1.0&#39;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">apiKey</span><span class="p">:</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Argus-API-Key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">apiKey</span>
    <span class="k">elif</span> <span class="n">authentication</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">authentication</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">callable</span><span class="p">(</span><span class="n">authentication</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>

    <span class="n">body</span> <span class="o">=</span> <span class="p">{}</span>
    
    <span class="k">if</span> <span class="n">changeMatching</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;changeMatching&quot;</span><span class="p">:</span> <span class="n">changeMatching</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">changeTypes</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;changeTypes&quot;</span><span class="p">:</span> <span class="n">changeTypes</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">changeFormats</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;changeFormats&quot;</span><span class="p">:</span> <span class="n">changeFormats</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">changeRoles</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;changeRoles&quot;</span><span class="p">:</span> <span class="n">changeRoles</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">sender</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;sender&quot;</span><span class="p">:</span> <span class="n">sender</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">setFlags</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;setFlags&quot;</span><span class="p">:</span> <span class="n">setFlags</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">unsetFlags</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;unsetFlags&quot;</span><span class="p">:</span> <span class="n">unsetFlags</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">subjectTemplate</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;subjectTemplate&quot;</span><span class="p">:</span> <span class="n">subjectTemplate</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">bodyTemplate</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;bodyTemplate&quot;</span><span class="p">:</span> <span class="n">bodyTemplate</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">smsTemplate</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;smsTemplate&quot;</span><span class="p">:</span> <span class="n">smsTemplate</span><span class="p">})</span>


    <span class="n">response</span> <span class="o">=</span> <span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span> <span class="k">if</span> <span class="n">body</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">verify</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AuthenticationFailedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AccessDeniedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">412</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ValidationErrorException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ObjectNotFoundException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="k">if</span> <span class="n">json</span> <span class="k">else</span> <span class="n">response</span></div>

<div class="viewcode-block" id="update_action"><a class="viewcode-back" href="../../../../../api/api.system.notification.v1.html#api.system.notification.v1.rule.update_action">[docs]</a><span class="nd">@register_command</span><span class="p">(</span><span class="n">extending</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;system&#39;</span><span class="p">,</span><span class="s1">&#39;notification&#39;</span><span class="p">,</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span><span class="s1">&#39;rule&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">update_action</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">changeMatching</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">changeTypes</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">changeFormats</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">changeRoles</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">sender</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">setFlags</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">unsetFlags</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">subjectTemplate</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">bodyTemplate</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">smsTemplate</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span><span class="n">json</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">authentication</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Update notification rule action (INTERNAL)</span>

<span class="sd">    </span>

<span class="sd">    :param int id: ID of rule to update</span>
<span class="sd">    :param str changeMatching: [\s\w\{\}\$\-\(\)\.\[\]&quot;\&#39;_/\\,\*\+\#:@!?;]*</span>
<span class="sd">    :param list changeTypes: </span>
<span class="sd">    :param list changeFormats: </span>
<span class="sd">    :param list changeRoles: </span>
<span class="sd">    :param str sender: </span>
<span class="sd">    :param int setFlags: </span>
<span class="sd">    :param int unsetFlags: </span>
<span class="sd">    :param dict subjectTemplate: format:html</span>
<span class="sd">    :param dict bodyTemplate: format:html</span>
<span class="sd">    :param dict smsTemplate: [\s\w\{\}\$\-\(\)\.\[\]&quot;\&#39;_/\\,\*\+\#:@!?;]*</span>
<span class="sd">    :param int index: Index of action to update</span>
<span class="sd">    :raises AuthenticationFailedException: on 401</span>
<span class="sd">    :raises ValidationErrorException: on 412</span>
<span class="sd">    :raises AccessDeniedException: on 403</span>
<span class="sd">    :raises ObjectNotFoundException: on 404</span>
<span class="sd">    :returns: {&quot;offset&quot;: 621, &quot;limit&quot;: 374, &quot;responseCode&quot;: 200, &quot;count&quot;: 982, &quot;metaData&quot;: {&quot;additionalProperties&quot;: {}}, &quot;messages&quot;: [{&quot;message&quot;: &quot;Animal specific create management.&quot;, &quot;messageTemplate&quot;: &quot;Hundred free rest bit impact class black organization.&quot;, &quot;field&quot;: &quot;Throw act large simply rate your.&quot;, &quot;parameter&quot;: {}, &quot;timestamp&quot;: 1204165275}], &quot;currentPage&quot;: 286, &quot;size&quot;: 480} </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">requests</span> <span class="k">import</span> <span class="n">put</span>
    <span class="kn">from</span> <span class="nn">argus_api.exceptions</span> <span class="k">import</span> <span class="n">http</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://osl-argus-trunk-web1.mnemonic.no/web/api/system/notification/v1/rule/</span><span class="si">{id}</span><span class="s2">/actions/</span><span class="si">{index}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;ArgusToolbelt/1.0&#39;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">apiKey</span><span class="p">:</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Argus-API-Key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">apiKey</span>
    <span class="k">elif</span> <span class="n">authentication</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">authentication</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">callable</span><span class="p">(</span><span class="n">authentication</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>

    <span class="n">body</span> <span class="o">=</span> <span class="p">{}</span>
    
    <span class="k">if</span> <span class="n">changeMatching</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;changeMatching&quot;</span><span class="p">:</span> <span class="n">changeMatching</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">changeTypes</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;changeTypes&quot;</span><span class="p">:</span> <span class="n">changeTypes</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">changeFormats</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;changeFormats&quot;</span><span class="p">:</span> <span class="n">changeFormats</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">changeRoles</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;changeRoles&quot;</span><span class="p">:</span> <span class="n">changeRoles</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">sender</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;sender&quot;</span><span class="p">:</span> <span class="n">sender</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">setFlags</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;setFlags&quot;</span><span class="p">:</span> <span class="n">setFlags</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">unsetFlags</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;unsetFlags&quot;</span><span class="p">:</span> <span class="n">unsetFlags</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">subjectTemplate</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;subjectTemplate&quot;</span><span class="p">:</span> <span class="n">subjectTemplate</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">bodyTemplate</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;bodyTemplate&quot;</span><span class="p">:</span> <span class="n">bodyTemplate</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">smsTemplate</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;smsTemplate&quot;</span><span class="p">:</span> <span class="n">smsTemplate</span><span class="p">})</span>


    <span class="n">response</span> <span class="o">=</span> <span class="n">put</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span> <span class="k">if</span> <span class="n">body</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">verify</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AuthenticationFailedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AccessDeniedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">412</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ValidationErrorException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ObjectNotFoundException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="k">if</span> <span class="n">json</span> <span class="k">else</span> <span class="n">response</span></div>

<div class="viewcode-block" id="delete_action"><a class="viewcode-back" href="../../../../../api/api.system.notification.v1.html#api.system.notification.v1.rule.delete_action">[docs]</a><span class="nd">@register_command</span><span class="p">(</span><span class="n">extending</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;system&#39;</span><span class="p">,</span><span class="s1">&#39;notification&#39;</span><span class="p">,</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span><span class="s1">&#39;rule&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">delete_action</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span><span class="n">json</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">authentication</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Delete action from notification rule (INTERNAL)</span>

<span class="sd">    </span>

<span class="sd">    :param int id: ID of rule</span>
<span class="sd">    :param int index: Index of action to delete</span>
<span class="sd">    :raises AuthenticationFailedException: on 401</span>
<span class="sd">    :raises ValidationErrorException: on 412</span>
<span class="sd">    :raises AccessDeniedException: on 403</span>
<span class="sd">    :raises ObjectNotFoundException: on 404</span>
<span class="sd">    :returns: {&quot;offset&quot;: 206, &quot;limit&quot;: 467, &quot;responseCode&quot;: 200, &quot;count&quot;: 126, &quot;metaData&quot;: {&quot;additionalProperties&quot;: {}}, &quot;messages&quot;: [{&quot;message&quot;: &quot;Measure year last special kid model.&quot;, &quot;messageTemplate&quot;: &quot;Data continue reality western kid.&quot;, &quot;field&quot;: &quot;Street shoulder so table.&quot;, &quot;parameter&quot;: {}, &quot;timestamp&quot;: 586341039}], &quot;currentPage&quot;: 45, &quot;size&quot;: 469} </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">requests</span> <span class="k">import</span> <span class="n">delete</span>
    <span class="kn">from</span> <span class="nn">argus_api.exceptions</span> <span class="k">import</span> <span class="n">http</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://osl-argus-trunk-web1.mnemonic.no/web/api/system/notification/v1/rule/</span><span class="si">{id}</span><span class="s2">/actions/</span><span class="si">{index}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;ArgusToolbelt/1.0&#39;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">apiKey</span><span class="p">:</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Argus-API-Key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">apiKey</span>
    <span class="k">elif</span> <span class="n">authentication</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">authentication</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">callable</span><span class="p">(</span><span class="n">authentication</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>

    <span class="n">body</span> <span class="o">=</span> <span class="p">{}</span>
    

    <span class="n">response</span> <span class="o">=</span> <span class="n">delete</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span> <span class="k">if</span> <span class="n">body</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">verify</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AuthenticationFailedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AccessDeniedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">412</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ValidationErrorException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ObjectNotFoundException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="k">if</span> <span class="n">json</span> <span class="k">else</span> <span class="n">response</span></div>

<div class="viewcode-block" id="add_destination"><a class="viewcode-back" href="../../../../../api/api.system.notification.v1.html#api.system.notification.v1.rule.add_destination">[docs]</a><span class="nd">@register_command</span><span class="p">(</span><span class="n">extending</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;system&#39;</span><span class="p">,</span><span class="s1">&#39;notification&#39;</span><span class="p">,</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span><span class="s1">&#39;rule&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">add_destination</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">role</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">destination</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">flags</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span><span class="n">json</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">authentication</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add destination to notification rule (INTERNAL)</span>

<span class="sd">    </span>

<span class="sd">    :param int id: ID of rule to add this destination to</span>
<span class="sd">    :param str format: </span>
<span class="sd">    :param str type: </span>
<span class="sd">    :param str role: </span>
<span class="sd">    :param str name: [\s\w\{\}\$\-\(\)\.\[\]&quot;\&#39;_/\\,\*\+\#:@!?;]*</span>
<span class="sd">    :param str destination: </span>
<span class="sd">    :param str language: </span>
<span class="sd">    :param int flags: </span>
<span class="sd">    :raises AuthenticationFailedException: on 401</span>
<span class="sd">    :raises ValidationErrorException: on 412</span>
<span class="sd">    :raises AccessDeniedException: on 403</span>
<span class="sd">    :raises ObjectNotFoundException: on 404</span>
<span class="sd">    :returns: {&quot;offset&quot;: 944, &quot;limit&quot;: 584, &quot;responseCode&quot;: 200, &quot;count&quot;: 138, &quot;metaData&quot;: {&quot;additionalProperties&quot;: {}}, &quot;messages&quot;: [{&quot;message&quot;: &quot;Into policy share act foreign region agree.&quot;, &quot;messageTemplate&quot;: &quot;For happy market campaign coach.&quot;, &quot;field&quot;: &quot;Interesting real decide late toward with I.&quot;, &quot;parameter&quot;: {}, &quot;timestamp&quot;: 1190684668}], &quot;currentPage&quot;: 10, &quot;size&quot;: 411} </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">requests</span> <span class="k">import</span> <span class="n">post</span>
    <span class="kn">from</span> <span class="nn">argus_api.exceptions</span> <span class="k">import</span> <span class="n">http</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://osl-argus-trunk-web1.mnemonic.no/web/api/system/notification/v1/rule/</span><span class="si">{id}</span><span class="s2">/destinations&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;ArgusToolbelt/1.0&#39;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">apiKey</span><span class="p">:</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Argus-API-Key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">apiKey</span>
    <span class="k">elif</span> <span class="n">authentication</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">authentication</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">callable</span><span class="p">(</span><span class="n">authentication</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>

    <span class="n">body</span> <span class="o">=</span> <span class="p">{}</span>
    
    <span class="k">if</span> <span class="nb">format</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="nb">format</span><span class="p">})</span>

    <span class="k">if</span> <span class="nb">type</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">role</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="n">role</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">destination</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;destination&quot;</span><span class="p">:</span> <span class="n">destination</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">language</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">language</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">flags</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;flags&quot;</span><span class="p">:</span> <span class="n">flags</span><span class="p">})</span>


    <span class="n">response</span> <span class="o">=</span> <span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span> <span class="k">if</span> <span class="n">body</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">verify</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AuthenticationFailedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AccessDeniedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">412</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ValidationErrorException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ObjectNotFoundException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="k">if</span> <span class="n">json</span> <span class="k">else</span> <span class="n">response</span></div>

<div class="viewcode-block" id="update_destination"><a class="viewcode-back" href="../../../../../api/api.system.notification.v1.html#api.system.notification.v1.rule.update_destination">[docs]</a><span class="nd">@register_command</span><span class="p">(</span><span class="n">extending</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;system&#39;</span><span class="p">,</span><span class="s1">&#39;notification&#39;</span><span class="p">,</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span><span class="s1">&#39;rule&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">update_destination</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">role</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">destination</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">flags</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span><span class="n">json</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">authentication</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Update notification rule destination (INTERNAL)</span>

<span class="sd">    </span>

<span class="sd">    :param int id: ID of rule to update</span>
<span class="sd">    :param int index: Index of destination to update</span>
<span class="sd">    :param str format: </span>
<span class="sd">    :param str type: </span>
<span class="sd">    :param str role: </span>
<span class="sd">    :param str name: [\s\w\{\}\$\-\(\)\.\[\]&quot;\&#39;_/\\,\*\+\#:@!?;]*</span>
<span class="sd">    :param str destination: </span>
<span class="sd">    :param str language: </span>
<span class="sd">    :param int flags: </span>
<span class="sd">    :raises AuthenticationFailedException: on 401</span>
<span class="sd">    :raises ValidationErrorException: on 412</span>
<span class="sd">    :raises AccessDeniedException: on 403</span>
<span class="sd">    :raises ObjectNotFoundException: on 404</span>
<span class="sd">    :returns: {&quot;offset&quot;: 211, &quot;limit&quot;: 135, &quot;responseCode&quot;: 200, &quot;count&quot;: 673, &quot;metaData&quot;: {&quot;additionalProperties&quot;: {}}, &quot;messages&quot;: [{&quot;message&quot;: &quot;Nor sometimes seek movement ground attorney.&quot;, &quot;messageTemplate&quot;: &quot;Son live course drug road box like.&quot;, &quot;field&quot;: &quot;Start room today soon bag.&quot;, &quot;parameter&quot;: {}, &quot;timestamp&quot;: 1098214541}], &quot;currentPage&quot;: 977, &quot;size&quot;: 219} </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">requests</span> <span class="k">import</span> <span class="n">put</span>
    <span class="kn">from</span> <span class="nn">argus_api.exceptions</span> <span class="k">import</span> <span class="n">http</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://osl-argus-trunk-web1.mnemonic.no/web/api/system/notification/v1/rule/</span><span class="si">{id}</span><span class="s2">/destinations/</span><span class="si">{index}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;ArgusToolbelt/1.0&#39;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">apiKey</span><span class="p">:</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Argus-API-Key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">apiKey</span>
    <span class="k">elif</span> <span class="n">authentication</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">authentication</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">callable</span><span class="p">(</span><span class="n">authentication</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>

    <span class="n">body</span> <span class="o">=</span> <span class="p">{}</span>
    
    <span class="k">if</span> <span class="nb">format</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="nb">format</span><span class="p">})</span>

    <span class="k">if</span> <span class="nb">type</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">role</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="n">role</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">destination</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;destination&quot;</span><span class="p">:</span> <span class="n">destination</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">language</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">language</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">flags</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;flags&quot;</span><span class="p">:</span> <span class="n">flags</span><span class="p">})</span>


    <span class="n">response</span> <span class="o">=</span> <span class="n">put</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span> <span class="k">if</span> <span class="n">body</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">verify</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AuthenticationFailedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AccessDeniedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">412</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ValidationErrorException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ObjectNotFoundException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="k">if</span> <span class="n">json</span> <span class="k">else</span> <span class="n">response</span></div>

<div class="viewcode-block" id="delete_destination"><a class="viewcode-back" href="../../../../../api/api.system.notification.v1.html#api.system.notification.v1.rule.delete_destination">[docs]</a><span class="nd">@register_command</span><span class="p">(</span><span class="n">extending</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;system&#39;</span><span class="p">,</span><span class="s1">&#39;notification&#39;</span><span class="p">,</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span><span class="s1">&#39;rule&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">delete_destination</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span><span class="n">json</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">authentication</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Delete destination from notification rule (INTERNAL)</span>

<span class="sd">    </span>

<span class="sd">    :param int id: ID of rule</span>
<span class="sd">    :param int index: Index of destination to delete</span>
<span class="sd">    :raises AuthenticationFailedException: on 401</span>
<span class="sd">    :raises ValidationErrorException: on 412</span>
<span class="sd">    :raises AccessDeniedException: on 403</span>
<span class="sd">    :raises ObjectNotFoundException: on 404</span>
<span class="sd">    :returns: {&quot;offset&quot;: 95, &quot;limit&quot;: 851, &quot;responseCode&quot;: 200, &quot;count&quot;: 116, &quot;metaData&quot;: {&quot;additionalProperties&quot;: {}}, &quot;messages&quot;: [{&quot;message&quot;: &quot;At agent unit company suggest nature.&quot;, &quot;messageTemplate&quot;: &quot;Hotel its language question child civil while.&quot;, &quot;field&quot;: &quot;Light again voice walk.&quot;, &quot;parameter&quot;: {}, &quot;timestamp&quot;: 1431643938}], &quot;currentPage&quot;: 457, &quot;size&quot;: 912} </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">requests</span> <span class="k">import</span> <span class="n">delete</span>
    <span class="kn">from</span> <span class="nn">argus_api.exceptions</span> <span class="k">import</span> <span class="n">http</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://osl-argus-trunk-web1.mnemonic.no/web/api/system/notification/v1/rule/</span><span class="si">{id}</span><span class="s2">/destinations/</span><span class="si">{index}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;ArgusToolbelt/1.0&#39;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">apiKey</span><span class="p">:</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Argus-API-Key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">apiKey</span>
    <span class="k">elif</span> <span class="n">authentication</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">authentication</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">callable</span><span class="p">(</span><span class="n">authentication</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>

    <span class="n">body</span> <span class="o">=</span> <span class="p">{}</span>
    

    <span class="n">response</span> <span class="o">=</span> <span class="n">delete</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span> <span class="k">if</span> <span class="n">body</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">verify</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AuthenticationFailedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AccessDeniedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">412</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ValidationErrorException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ObjectNotFoundException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="k">if</span> <span class="n">json</span> <span class="k">else</span> <span class="n">response</span></div>

<div class="viewcode-block" id="duplicate_rule"><a class="viewcode-back" href="../../../../../api/api.system.notification.v1.html#api.system.notification.v1.rule.duplicate_rule">[docs]</a><span class="nd">@register_command</span><span class="p">(</span><span class="n">extending</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;system&#39;</span><span class="p">,</span><span class="s1">&#39;notification&#39;</span><span class="p">,</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span><span class="s1">&#39;rule&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">duplicate_rule</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span><span class="n">json</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">authentication</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Duplicate this notification rule (INTERNAL)</span>

<span class="sd">    </span>

<span class="sd">    :param int id: ID of rule to duplicate</span>
<span class="sd">    :raises AuthenticationFailedException: on 401</span>
<span class="sd">    :raises ValidationErrorException: on 412</span>
<span class="sd">    :raises AccessDeniedException: on 403</span>
<span class="sd">    :raises ObjectNotFoundException: on 404</span>
<span class="sd">    :returns: {&quot;offset&quot;: 515, &quot;limit&quot;: 493, &quot;responseCode&quot;: 200, &quot;count&quot;: 931, &quot;metaData&quot;: {&quot;additionalProperties&quot;: {}}, &quot;messages&quot;: [{&quot;message&quot;: &quot;Human wide owner hold claim tough.&quot;, &quot;messageTemplate&quot;: &quot;Choose follow manager several.&quot;, &quot;field&quot;: &quot;Sister both type south door travel hotel or.&quot;, &quot;parameter&quot;: {}, &quot;timestamp&quot;: 1329019540}], &quot;currentPage&quot;: 663, &quot;size&quot;: 38} </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">requests</span> <span class="k">import</span> <span class="n">post</span>
    <span class="kn">from</span> <span class="nn">argus_api.exceptions</span> <span class="k">import</span> <span class="n">http</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://osl-argus-trunk-web1.mnemonic.no/web/api/system/notification/v1/rule/</span><span class="si">{id}</span><span class="s2">/duplicate&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;ArgusToolbelt/1.0&#39;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">apiKey</span><span class="p">:</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Argus-API-Key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">apiKey</span>
    <span class="k">elif</span> <span class="n">authentication</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">authentication</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">callable</span><span class="p">(</span><span class="n">authentication</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>

    <span class="n">body</span> <span class="o">=</span> <span class="p">{}</span>
    

    <span class="n">response</span> <span class="o">=</span> <span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span> <span class="k">if</span> <span class="n">body</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">verify</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AuthenticationFailedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AccessDeniedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">412</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ValidationErrorException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ObjectNotFoundException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="k">if</span> <span class="n">json</span> <span class="k">else</span> <span class="n">response</span></div>

<div class="viewcode-block" id="revisions"><a class="viewcode-back" href="../../../../../api/api.system.notification.v1.html#api.system.notification.v1.rule.revisions">[docs]</a><span class="nd">@register_command</span><span class="p">(</span><span class="n">extending</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;system&#39;</span><span class="p">,</span><span class="s1">&#39;notification&#39;</span><span class="p">,</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span><span class="s1">&#39;rule&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">revisions</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span><span class="n">json</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">authentication</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;List revisions of notification rule (INTERNAL)</span>

<span class="sd">    </span>

<span class="sd">    :param int id: ID of rule to fetch</span>
<span class="sd">    :param int offset: Offset result</span>
<span class="sd">    :param int limit: Limit result</span>
<span class="sd">    :raises AuthenticationFailedException: on 401</span>
<span class="sd">    :raises ValidationErrorException: on 412</span>
<span class="sd">    :raises AccessDeniedException: on 403</span>
<span class="sd">    :raises ObjectNotFoundException: on 404</span>
<span class="sd">    :returns: {&quot;offset&quot;: 482, &quot;limit&quot;: 708, &quot;responseCode&quot;: 200, &quot;count&quot;: 897, &quot;metaData&quot;: {&quot;additionalProperties&quot;: {}}, &quot;messages&quot;: [{&quot;message&quot;: &quot;Stay surface serious term.&quot;, &quot;messageTemplate&quot;: &quot;Maybe majority finally pretty environment.&quot;, &quot;field&quot;: &quot;Mean relate course thousand good.&quot;, &quot;parameter&quot;: {}, &quot;timestamp&quot;: 99403013}], &quot;currentPage&quot;: 485, &quot;size&quot;: 415} </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">requests</span> <span class="k">import</span> <span class="n">get</span>
    <span class="kn">from</span> <span class="nn">argus_api.exceptions</span> <span class="k">import</span> <span class="n">http</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://osl-argus-trunk-web1.mnemonic.no/web/api/system/notification/v1/rule/</span><span class="si">{id}</span><span class="s2">/revisions&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;ArgusToolbelt/1.0&#39;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">apiKey</span><span class="p">:</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Argus-API-Key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">apiKey</span>
    <span class="k">elif</span> <span class="n">authentication</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">authentication</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">callable</span><span class="p">(</span><span class="n">authentication</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>

    <span class="n">body</span> <span class="o">=</span> <span class="p">{}</span>
    
    <span class="k">if</span> <span class="n">limit</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="n">limit</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">offset</span><span class="p">:</span>
        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;offset&quot;</span><span class="p">:</span> <span class="n">offset</span><span class="p">})</span>


    <span class="n">response</span> <span class="o">=</span> <span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span> <span class="k">if</span> <span class="n">body</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">verify</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AuthenticationFailedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AccessDeniedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">412</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ValidationErrorException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ObjectNotFoundException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="k">if</span> <span class="n">json</span> <span class="k">else</span> <span class="n">response</span></div>

<div class="viewcode-block" id="get_rule_by_name"><a class="viewcode-back" href="../../../../../api/api.system.notification.v1.html#api.system.notification.v1.rule.get_rule_by_name">[docs]</a><span class="nd">@register_command</span><span class="p">(</span><span class="n">extending</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;system&#39;</span><span class="p">,</span><span class="s1">&#39;notification&#39;</span><span class="p">,</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span><span class="s1">&#39;rule&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">get_rule_by_name</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span><span class="n">json</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">verify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">authentication</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Fetch notification rule (INTERNAL)</span>

<span class="sd">    </span>

<span class="sd">    :param str name: Name of rule to fetch</span>
<span class="sd">    :raises AuthenticationFailedException: on 401</span>
<span class="sd">    :raises ValidationErrorException: on 412</span>
<span class="sd">    :raises AccessDeniedException: on 403</span>
<span class="sd">    :raises ObjectNotFoundException: on 404</span>
<span class="sd">    :returns: {&quot;offset&quot;: 731, &quot;limit&quot;: 126, &quot;responseCode&quot;: 200, &quot;count&quot;: 187, &quot;metaData&quot;: {&quot;additionalProperties&quot;: {}}, &quot;messages&quot;: [{&quot;message&quot;: &quot;Require certainly bad rather.&quot;, &quot;messageTemplate&quot;: &quot;Call artist attention local.&quot;, &quot;field&quot;: &quot;Single authority future might beat in.&quot;, &quot;parameter&quot;: {}, &quot;timestamp&quot;: 1056529161}], &quot;currentPage&quot;: 662, &quot;size&quot;: 484} </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">requests</span> <span class="k">import</span> <span class="n">get</span>
    <span class="kn">from</span> <span class="nn">argus_api.exceptions</span> <span class="k">import</span> <span class="n">http</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://osl-argus-trunk-web1.mnemonic.no/web/api/system/notification/v1/rule/</span><span class="si">{name}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;ArgusToolbelt/1.0&#39;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">apiKey</span><span class="p">:</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Argus-API-Key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">apiKey</span>
    <span class="k">elif</span> <span class="n">authentication</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">authentication</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">callable</span><span class="p">(</span><span class="n">authentication</span><span class="p">):</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">authentication</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>

    <span class="n">body</span> <span class="o">=</span> <span class="p">{}</span>
    

    <span class="n">response</span> <span class="o">=</span> <span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span> <span class="k">if</span> <span class="n">body</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="n">verify</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AuthenticationFailedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">AccessDeniedException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">412</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ValidationErrorException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">ObjectNotFoundException</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="k">if</span> <span class="n">json</span> <span class="k">else</span> <span class="n">response</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../../index.html">Documentation overview</a><ul>
  <li><a href="../../../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, mnemonic.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.7</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
    </div>

    

    
  </body>
</html>