/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */

/*
  Copyright (C) 2013 Gregory Schier <gschier1990@gmail.com>
  Copyright (C) 2013 Martin Zimmermann <info@posativ.org>

  Inspired by http://codepen.io/gschier/pen/GLvAy
*/

/*
 * Copyright 2014, Martin Zimmermann <info@posativ.org>. All rights reserved.
 * Distributed under the MIT license
 */

!function(){var requirejs,require,define;!function(e){function n(e,n){return v.call(e,n)}function t(e,n){var t,o,i,a,r,s,l,m,c,d,p,u,f=n&&n.split("/"),h=g.map,b=h&&h["*"]||{};if(e){for(e=e.split("/"),r=e.length-1,g.nodeIdCompat&&w.test(e[r])&&(e[r]=e[r].replace(w,"")),"."===e[0].charAt(0)&&f&&(u=f.slice(0,f.length-1),e=u.concat(e)),c=0;c<e.length;c++)if("."===(p=e[c]))e.splice(c,1),c-=1;else if(".."===p){if(0===c||1===c&&".."===e[2]||".."===e[c-1])continue;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}if((f||b)&&h){for(t=e.split("/"),c=t.length;c>0;c-=1){if(o=t.slice(0,c).join("/"),f)for(d=f.length;d>0;d-=1)if((i=h[f.slice(0,d).join("/")])&&(i=i[o])){a=i,s=c;break}if(a)break;!l&&b&&b[o]&&(l=b[o],m=c)}!a&&l&&(a=l,s=m),a&&(t.splice(0,s,a),e=t.join("/"))}return e}function o(n,t){return function(){var o=x.call(arguments,0);return"string"!=typeof o[0]&&1===o.length&&o.push(null),d.apply(e,o.concat([n,t]))}}function i(e){return function(n){return t(n,e)}}function a(e){return function(n){f[e]=n}}function r(t){if(n(h,t)){var o=h[t];delete h[t],b[t]=!0,c.apply(e,o)}if(!n(f,t)&&!n(b,t))throw new Error("No "+t);return f[t]}function s(e){var n,t=e?e.indexOf("!"):-1;return t>-1&&(n=e.substring(0,t),e=e.substring(t+1,e.length)),[n,e]}function l(e){return e?s(e):[]}function m(e){return function(){return g&&g.config&&g.config[e]||{}}}var c,d,p,u,f={},h={},g={},b={},v=Object.prototype.hasOwnProperty,x=[].slice,w=/\.js$/;p=function(e,n){var o,a=s(e),l=a[0],m=n[1];return e=a[1],l&&(l=t(l,m),o=r(l)),l?e=o&&o.normalize?o.normalize(e,i(m)):t(e,m):(e=t(e,m),a=s(e),l=a[0],e=a[1],l&&(o=r(l))),{f:l?l+"!"+e:e,n:e,pr:l,p:o}},u={require:function(e){return o(e)},exports:function(e){var n=f[e];return void 0!==n?n:f[e]={}},module:function(e){return{id:e,uri:"",exports:f[e],config:m(e)}}},c=function(t,i,s,m){var c,d,g,v,x,w,y,k=[],j=typeof s;if(m=m||t,w=l(m),"undefined"===j||"function"===j){for(i=!i.length&&s.length?["require","exports","module"]:i,x=0;x<i.length;x+=1)if(v=p(i[x],w),"require"===(d=v.f))k[x]=u.require(t);else if("exports"===d)k[x]=u.exports(t),y=!0;else if("module"===d)c=k[x]=u.module(t);else if(n(f,d)||n(h,d)||n(b,d))k[x]=r(d);else{if(!v.p)throw new Error(t+" missing "+d);v.p.load(v.n,o(m,!0),a(d),{}),k[x]=f[d]}g=s?s.apply(f[t],k):void 0,t&&(c&&c.exports!==e&&c.exports!==f[t]?f[t]=c.exports:g===e&&y||(f[t]=g))}else t&&(f[t]=s)},requirejs=require=d=function(n,t,o,i,a){if("string"==typeof n)return u[n]?u[n](t):r(p(n,l(t)).f);if(!n.splice){if(g=n,g.deps&&d(g.deps,g.callback),!t)return;t.splice?(n=t,t=o,o=null):n=e}return t=t||function(){},"function"==typeof o&&(o=i,i=a),i?c(e,n,t,o):setTimeout(function(){c(e,n,t,o)},4),d},d.config=function(e){return d(e)},requirejs._defined=f,define=function(e,t,o){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(o=t,t=[]),n(f,e)||n(h,e)||(h[e]=[e,t,o])},define.amd={jQuery:!0}}(),define("components/almond/almond",function(){}),define("app/lib/ready",[],function(){"use strict";var e=!1,n=function(n){e||(e=!0,n())};return function(e){document.addEventListener("DOMContentLoaded",function(){n(e)}),"interactive"!==document.readyState&&"complete"!==document.readyState||n(e)}}),define("app/config",[],function(){"use strict";return{init:function(e){for(var n in e)this[n]=e[n];"auto"==this.lang&&(this.lang=(navigator.language||navigator.userLanguage).split("-")[0]),this["avatar-fg"]=this["avatar-fg"].replace(/\\#/g,"#").split(" "),this["avatar-bg"]=this["avatar-bg"].replace(/\\#/g,"#")}}}),define("app/i18n/bg",{"postbox-text":"Въведете коментара си тук (поне 3 знака)","postbox-author":"Име/псевдоним (незадължително)","postbox-email":"Ел. поща (незадължително)","postbox-website":"Уебсайт (незадължително)","postbox-submit":"Публикуване","num-comments":"1 коментар\n{{ n }} коментара","no-comments":"Все още няма коментари","comment-reply":"Отговор","comment-edit":"Редактиране","comment-save":"Запис","comment-delete":"Изтриване","comment-confirm":"Потвърждение","comment-close":"Затваряне","comment-cancel":"Отказ","comment-deleted":"Коментарът е изтрит.","comment-queued":"Коментарът чака на опашката за модериране.","comment-anonymous":"анонимен","comment-hidden":"{{ n }} скрити","date-now":"сега","date-minute":"преди 1 минута\nпреди {{ n }} минути","date-hour":"преди 1 час\nпреди {{ n }} часа","date-day":"вчера\nпреди {{ n }} дни","date-week":"миналата седмица\nпреди {{ n }} седмици","date-month":"миналия месец\nпреди {{ n }} месеца","date-year":"миналата година\nпреди {{ n }} години"}),define("app/i18n/cs",{"postbox-text":"Sem napiště svůj komentář (nejméně 3 znaky)","postbox-author":"Jméno (nepovinné)","postbox-email":"E-mail (nepovinný)","postbox-website":"Web (nepovinný)","postbox-submit":"Publikovat","num-comments":"Jeden komentář\n{{ n }} Komentářů","no-comments":"Zatím bez komentářů","comment-reply":"Odpovědět","comment-edit":"Upravit","comment-save":"Uložit","comment-delete":"Smazat","comment-confirm":"Potvrdit","comment-close":"Zavřít","comment-cancel":"Zrušit","comment-deleted":"Komentář smazán","comment-queued":"Komentář ve frontě na schválení","comment-anonymous":"Anonym","comment-hidden":"{{ n }} skryto","date-now":"právě teď","date-minute":"před minutou\npřed {{ n }} minutami","date-hour":"před hodinou\npřed {{ n }} hodinami","date-day":"včera\npřed {{ n }} dny","date-week":"minulý týden\npřed {{ n }} týdny","date-month":"minulý měsíc\npřed {{ n }} měsíci","date-year":"minulý rok\npřed {{ n }} lety"}),define("app/i18n/de",{"postbox-text":"Kommentar hier eintippen (mindestens 3 Zeichen)","postbox-author":"Name (optional)","postbox-email":"Email (optional)","postbox-website":"Website (optional)","postbox-submit":"Abschicken","num-comments":"1 Kommentar\n{{ n }} Kommentare","no-comments":"Keine Kommentare bis jetzt","comment-reply":"Antworten","comment-edit":"Bearbeiten","comment-save":"Speichern","comment-delete":"Löschen","comment-confirm":"Bestätigen","comment-close":"Schließen","comment-cancel":"Abbrechen","comment-deleted":"Kommentar gelöscht.","comment-queued":"Kommentar muss noch freigeschaltet werden.","comment-anonymous":"Anonym","comment-hidden":"{{ n }} versteckt","date-now":"eben jetzt","date-minute":"vor einer Minute\nvor {{ n }} Minuten","date-hour":"vor einer Stunde\nvor {{ n }} Stunden","date-day":"Gestern\nvor {{ n }} Tagen","date-week":"letzte Woche\nvor {{ n }} Wochen","date-month":"letzten Monat\nvor {{ n }} Monaten","date-year":"letztes Jahr\nvor {{ n }} Jahren"}),define("app/i18n/en",{"postbox-text":"Type Comment Here (at least 3 chars)","postbox-author":"Name (optional)","postbox-email":"E-mail (optional)","postbox-website":"Website (optional)","postbox-submit":"Submit","num-comments":"One Comment\n{{ n }} Comments","no-comments":"No Comments Yet","comment-reply":"Reply","comment-edit":"Edit","comment-save":"Save","comment-delete":"Delete","comment-confirm":"Confirm","comment-close":"Close","comment-cancel":"Cancel","comment-deleted":"Comment deleted.","comment-queued":"Comment in queue for moderation.","comment-anonymous":"Anonymous","comment-hidden":"{{ n }} Hidden","markdown-note":" is supported.","login-note":" engine loaded, click icon again to log in.","date-now":"right now","date-minute":"a minute ago\n{{ n }} minutes ago","date-hour":"an hour ago\n{{ n }} hours ago","date-day":"Yesterday\n{{ n }} days ago","date-week":"last week\n{{ n }} weeks ago","date-month":"last month\n{{ n }} months ago","date-year":"last year\n{{ n }} years ago",login:"Login",logout:"Logout","auth-login":"or login:","auth-must-login":"Login to comment:","auth-openid":"Authenticate using OpenID Connect","auth-facebook":"Authenticate using Facebook","auth-google":"Authenticate using Google+","openid-title":"OpenID Connect login","openid-intro":"Please specify your OpenID Connect identifier:","openid-hints":"e.g. jane@example.com, acct:jane@example.com, http://example.com/jane","openid-identifier":"Verified OpenID: "}),define("app/i18n/fa",{"postbox-text":"نظر خود را اینجا بنویسید (حداقل سه کرکتر)","postbox-author":"اسم (اختیاری)","postbox-email":"ایمیل (اختیاری)","postbox-website":"سایت (اختیاری)","postbox-submit":"ارسال","num-comments":"یک نظر\n{{ n }} نظر","no-comments":"هنوز نظری نوشته نشده","comment-reply":"پاسخ","comment-edit":"ویرایش","comment-save":"ذخیره","comment-delete":"حذف","comment-confirm":"تایید","comment-close":"بستن","comment-cancel":"انصراف","comment-deleted":"کامنت حذف شد.","comment-queued":"کامنت در صف بررسی مدیر قرار دارد.","comment-anonymous":"ناشناس","comment-hidden":"{{ n }} مخفی","date-now":"هم اکنون","date-minute":"یک دقیقه پیش\n{{ n }} دقیقه پیش","date-hour":"یک ساعت پیش\n{{ n }} ساعت پیش","date-day":"دیروز\n{{ n }} روز پیش","date-week":"یک هفته پیش\n{{ n }} هفته پیش","date-month":"یک ماه پیش\n{{ n }} ماه پیش","date-year":"یک سال پیش\n{{ n }} سال پیش"}),define("app/i18n/fi",{"postbox-text":"Kirjoita kommentti tähän (vähintään 3 merkkiä)","postbox-author":"Nimi (valinnainen)","postbox-email":"Sähköposti (valinnainen)","postbox-website":"Web-sivu (valinnainen)","postbox-submit":"Lähetä","num-comments":"Yksi kommentti\n{{ n }} kommenttia","no-comments":"Ei vielä kommentteja","comment-reply":"Vastaa","comment-edit":"Muokkaa","comment-save":"Tallenna","comment-delete":"Poista","comment-confirm":"Vahvista","comment-close":"Sulje","comment-cancel":"Peru","comment-deleted":"Kommentti on poistettu.","comment-queued":"Kommentti on laitettu jonoon odottamaan moderointia.","comment-anonymous":"Nimetön","comment-hidden":"{{ n }} piilotettua","date-now":"hetki sitten","date-minute":"minuutti sitten\n{{ n }} minuuttia sitten","date-hour":"tunti sitten\n{{ n }} tuntia sitten","date-day":"eilen\n{{ n }} päivää sitten","date-week":"viime viikolla\n{{ n }} viikkoa sitten","date-month":"viime kuussa\n{{ n }} kuukautta sitten","date-year":"viime vuonna\n{{ n }} vuotta sitten"}),define("app/i18n/fr",{"postbox-text":"Insérez votre commentaire ici (au moins 3 lettres)","postbox-author":"Nom (optionnel)","postbox-email":"Courriel (optionnel)","postbox-website":"Site web (optionnel)","postbox-submit":"Soumettre","num-comments":"{{ n }} commentaire\n{{ n }} commentaires","no-comments":"Aucun commentaire pour l'instant","comment-reply":"Répondre","comment-edit":"Éditer","comment-save":"Enregistrer","comment-delete":"Supprimer","comment-confirm":"Confirmer","comment-close":"Fermer","comment-cancel":"Annuler","comment-deleted":"Commentaire supprimé.","comment-queued":"Commentaire en attente de modération.","comment-anonymous":"Anonyme","comment-hidden":"1 caché\n{{ n }} cachés","date-now":"À l'instant","date-minute":"Il y a une minute\nIl y a {{ n }} minutes","date-hour":"Il y a une heure\nIl y a {{ n }} heures ","date-day":"Hier\nIl y a {{ n }} jours","date-week":"Il y a une semaine\nIl y a {{ n }} semaines","date-month":"Il y a un mois\nIl y a {{ n }} mois","date-year":"Il y a un an\nIl y a {{ n }} ans"}),define("app/i18n/hr",{"postbox-text":"Napiši komentar ovdje (najmanje 3 znaka)","postbox-author":"Ime (neobavezno)","postbox-email":"E-mail (neobavezno)","postbox-website":"Web stranica (neobavezno)","postbox-submit":"Pošalji","num-comments":"Jedan komentar\n{{ n }} komentara","no-comments":"Još nema komentara","comment-reply":"Odgovori","comment-edit":"Uredi","comment-save":"Spremi","comment-delete":"Obriši","comment-confirm":"Potvrdi","comment-close":"Zatvori","comment-cancel":"Odustani","comment-deleted":"Komentar obrisan","comment-queued":"Komentar u redu za provjeru.","comment-anonymous":"Anonimno","comment-hidden":"{{ n }} Skrivenih","date-now":"upravo","date-minute":"prije minutu\nprije {{ n }} minuta","date-hour":"prije sat vremena\nprije {{ n }} sati","date-day":"jučer\nprije {{ n }} dana","date-week":"prošli tjedan\nprije {{ n }} tjedana","date-month":"prošli mjesec\nprije {{ n }} mjeseci","date-year":"prošle godine\nprije {{ n }} godina"}),define("app/i18n/ru",{"postbox-text":"Оставить комментарий (минимум 3 символа)","postbox-author":"Имя (необязательно)","postbox-email":"Email (необязательно)","postbox-website":"Сайт (необязательно)","postbox-submit":"Отправить","num-comments":"{{ n }} комментарий\n{{ n }} комментария\n{{ n }} комментариев","no-comments":"Пока нет комментариев","comment-reply":"Ответить","comment-edit":"Правка","comment-save":"Сохранить","comment-delete":"Удалить","comment-confirm":"Подтвердить удаление","comment-close":"Закрыть","comment-cancel":"Отменить","comment-deleted":"Комментарий удалён","comment-queued":"Комментарий будет проверен модератором","comment-anonymous":"Аноним","comment-hidden":"Скрыт {{ n }} комментарий\nСкрыто {{ n }} комментария\nСкрыто {{ n }} комментариев","date-now":"Только что","date-minute":"{{ n }} минуту назад\n{{ n }} минуты назад\n{{ n }} минут назад","date-hour":"{{ n }} час назад\n{{ n }} часа назад\n{{ n }} часов назад","date-day":"{{ n }} день назад\n{{ n }} дня назад\n{{ n }} дней назад","date-week":"{{ n }} неделю назад\n{{ n }} недели назад\n{{ n }} недель назад","date-month":"{{ n }} месяц назад\n{{ n }} месяца назад\n{{ n }} месяцев назад","date-year":"{{ n }} год назад\n{{ n }} года назад\n{{ n }} лет назад"}),define("app/i18n/it",{"postbox-text":"Scrivi un commento qui (minimo 3 caratteri)","postbox-author":"Nome (opzionale)","postbox-email":"E-mail (opzionale)","postbox-website":"Sito web (opzionale)","postbox-submit":"Invia","num-comments":"Un Commento\n{{ n }} Commenti","no-comments":"Ancora Nessun Commento","comment-reply":"Rispondi","comment-edit":"Modifica","comment-save":"Salva","comment-delete":"Elimina","comment-confirm":"Conferma","comment-close":"Chiudi","comment-cancel":"Cancella","comment-deleted":"Commento eliminato.","comment-queued":"Commento in coda per moderazione.","comment-anonymous":"Anonimo","comment-hidden":"{{ n }} Nascosto","date-now":"poco fa","date-minute":"un minuto fa\n{{ n }} minuti fa","date-hour":"un ora fa\n{{ n }} ore fa","date-day":"Ieri\n{{ n }} giorni fa","date-week":"questa settimana\n{{ n }} settimane fa","date-month":"questo mese\n{{ n }} mesi fa","date-year":"quest'anno\n{{ n }} anni fa"}),define("app/i18n/eo",{"postbox-text":"Tajpu komenton ĉi-tie (almenaŭ 3 signoj)","postbox-author":"Nomo (malnepra)","postbox-email":"Retadreso (malnepra)","postbox-website":"Retejo (malnepra)","postbox-submit":"Sendu","num-comments":"{{ n }} komento\n{{ n }} komentoj","no-comments":"Neniu komento ankoraŭ","comment-reply":"Respondu","comment-edit":"Redaktu","comment-save":"Savu","comment-delete":"Forviŝu","comment-confirm":"Konfirmu","comment-close":"Fermu","comment-cancel":"Malfaru","comment-deleted":"Komento forviŝita","comment-queued":"Komento en atendovico por kontrolo.","comment-anonymous":"Sennoma","comment-hidden":"{{ n }} kaŝitaj","date-now":"ĵus nun","date-minute":"antaŭ unu minuto\nantaŭ {{ n }} minutoj","date-hour":"antaŭ unu horo\nantaŭ {{ n }} horoj","date-day":"hieraŭ\nantaŭ {{ n }} tagoj","date-week":"lasta semajno\nantaŭ {{ n }} semajnoj","date-month":"lasta monato\nantaŭ {{ n }} monatoj","date-year":"lasta jaro\nantaŭ {{ n }} jaroj"}),define("app/i18n/sv",{"postbox-text":"Skriv din kommentar här (minst 3 tecken)","postbox-author":"Namn (frivilligt)","postbox-email":"E-mail (frivilligt)","postbox-website":"Hemsida (frivilligt)","postbox-submit":"Skicka","num-comments":"En kommentar\n{{ n }} kommentarer","no-comments":"Inga kommentarer än","comment-reply":"Svara","comment-edit":"Redigera","comment-save":"Spara","comment-delete":"Radera","comment-confirm":"Bekräfta","comment-close":"Stäng","comment-cancel":"Avbryt","comment-deleted":"Kommentar raderad.","comment-queued":"Kommentaren inväntar granskning.","comment-anonymous":"Anonym","comment-hidden":"{{ n }} Gömd","markdown-note":" stöds.","login-note":"-motorn laddad, klick på ikonen igen för att logga in.","date-now":"just nu","date-minute":"en minut sedan\n{{ n }} minuter sedan","date-hour":"en timme sedan\n{{ n }} timmar sedan","date-day":"igår\n{{ n }} dagar sedan","date-week":"förra veckan\n{{ n }} veckor sedan","date-month":"förra månaden\n{{ n }} månader sedan","date-year":"förra året\n{{ n }} år sedan",login:"Logga in",logout:"Logga ut","auth-login":"eller logga in:","auth-must-login":"Logga in för att kommentera:","auth-openid":"Legitimera dig med OpenID Connect","auth-facebook":"Legitimera dig med Facebook","auth-google":"Legitimera dig med Google+","openid-title":"Logga in med OpenID Connect","openid-intro":"Vänligen ange din identifierare för OpenID Connect:","openid-hints":"t.ex. jane@example.com, acct:jane@example.com, http://example.com/jane","openid-identifier":"Verifierat OpenID: "}),define("app/i18n/nl",{"postbox-text":"Typ reactie hier (minstens 3 karakters)","postbox-author":"Naam (optioneel)","postbox-email":"E-mail (optioneel)","postbox-website":"Website (optioneel)","postbox-submit":"Versturen","num-comments":"Één reactie\n{{ n }} reacties","no-comments":"Nog geen reacties","comment-reply":"Beantwoorden","comment-edit":"Bewerken","comment-save":"Opslaan","comment-delete":"Verwijderen","comment-confirm":"Bevestigen","comment-close":"Sluiten","comment-cancel":"Annuleren","comment-deleted":"Reactie verwijderd.","comment-queued":"Reactie staat in de wachtrij voor goedkeuring.","comment-anonymous":"Anoniem","comment-hidden":"{{ n }} verborgen","date-now":"zojuist","date-minute":"een minuut geleden\n{{ n }} minuten geleden","date-hour":"een uur geleden\n{{ n }} uur geleden","date-day":"gisteren\n{{ n }} dagen geleden","date-week":"vorige week\n{{ n }} weken geleden","date-month":"vorige maand\n{{ n }} maanden geleden","date-year":"vorig jaar\n{{ n }} jaar geleden"}),define("app/i18n/el_GR",{"postbox-text":"Γράψτε το σχόλιο εδώ (τουλάχιστον 3 χαρακτήρες)","postbox-author":"Όνομα (προαιρετικό)","postbox-email":"E-mail (προαιρετικό)","postbox-website":"Ιστοσελίδα (προαιρετικό)","postbox-submit":"Υποβολή","num-comments":"Ένα σχόλιο\n{{ n }} σχόλια","no-comments":"Δεν υπάρχουν σχόλια","comment-reply":"Απάντηση","comment-edit":"Επεξεργασία","comment-save":"Αποθήκευση","comment-delete":"Διαγραφή","comment-confirm":"Επιβεβαίωση","comment-close":"Κλείσιμο","comment-cancel":"Ακύρωση","comment-deleted":"Διαγραμμένο σχόλιο ","comment-queued":"Το σχόλιο αναμένει έγκριση","comment-anonymous":"Ανώνυμος","comment-hidden":"{{ n }} Κρυμμένα","date-now":"τώρα","date-minute":"πριν ένα λεπτό\nπριν {{ n }} λεπτά","date-hour":"πριν μία ώρα\nπριν {{ n }} ώρες","date-day":"Χτες\nπριν {{ n }} μέρες","date-week":"την προηγούμενη εβδομάδα\nπριν {{ n }} εβδομάδες","date-month":"τον προηγούμενο μήνα\nπριν {{ n }} μήνες","date-year":"πέρυσι\nπριν {{ n }} χρόνια"}),define("app/i18n/es",{"postbox-text":"Escriba su comentario aquí (al menos 3 caracteres)","postbox-author":"Nombre (opcional)","postbox-email":"E-mail (opcional)","postbox-website":"Sitio web (opcional)","postbox-submit":"Enviar","num-comments":"Un Comentario\n{{ n }} Comentarios","no-comments":"Sin Comentarios Todavía","comment-reply":"Responder","comment-edit":"Editar","comment-save":"Guardar","comment-delete":"Eliminar","comment-confirm":"Confirmar","comment-close":"Cerrar","comment-cancel":"Cancelar","comment-deleted":"Comentario eliminado.","comment-queued":"Comentario en espera para moderación.","comment-anonymous":"Anónimo","comment-hidden":"{{ n }} Oculto(s)","date-now":"ahora","date-minute":"hace un minuto\nhace {{ n }} minutos","date-hour":"hace una hora\nhace {{ n }} horas","date-day":"ayer\nHace {{ n }} días","date-week":"la semana pasada\nhace {{ n }} semanas","date-month":"el mes pasado\nhace {{ n }} meses","date-year":"el año pasado\nhace {{ n }} años"}),define("app/i18n/vi",{"postbox-text":"Nhập bình luận tại đây (tối thiểu 3 ký tự)","postbox-author":"Tên (tùy chọn)","postbox-email":"E-mail (tùy chọn)","postbox-website":"Website (tùy chọn)","postbox-submit":"Gửi","num-comments":"Một bình luận\n{{ n }} bình luận","no-comments":"Chưa có bình luận nào","comment-reply":"Trả lời","comment-edit":"Sửa","comment-save":"Lưu","comment-delete":"Xóa","comment-confirm":"Xác nhận","comment-close":"Đóng","comment-cancel":"Hủy","comment-deleted":"Đã xóa bình luận.","comment-queued":"Bình luận đang chờ duyệt","comment-anonymous":"Nặc danh","comment-hidden":"{{ n }} đã ẩn","date-now":"vừa mới","date-minute":"một phút trước\n{{ n }} phút trước","date-hour":"một giờ trước\n{{ n }} giờ trước","date-day":"Hôm qua\n{{ n }} ngày trước","date-week":"Tuần qua\n{{ n }} tuần trước","date-month":"Tháng trước\n{{ n }} tháng trước","date-year":"Năm trước\n{{ n }} năm trước"}),define("app/i18n/zh_CN",{"postbox-text":"在此输入评论 (最少3个字符)","postbox-author":"名字 (可选)","postbox-email":"E-mail (可选)","postbox-website":"网站 (可选)","postbox-submit":"提交","num-comments":"1条评论\n{{ n }}条评论","no-comments":"还没有评论","comment-reply":"回复","comment-edit":"编辑","comment-save":"保存","comment-delete":"删除","comment-confirm":"确认","comment-close":"关闭","comment-cancel":"取消","comment-deleted":"评论已删除.","comment-queued":"评论待审核.","comment-anonymous":"匿名","comment-hidden":"{{ n }} 条评论已隐藏","date-now":"刚刚","date-minute":"1分钟前\n{{ n }}分钟前","date-hour":"1小时前\n{{ n }}小时前","date-day":"昨天\n{{ n }}天前","date-week":"上周\n{{ n }}周前","date-month":"上个月\n{{ n }}个月前","date-year":"去年\n{{ n }}年前"}),define("app/i18n",["app/config","app/i18n/bg","app/i18n/cs","app/i18n/de","app/i18n/en","app/i18n/fa","app/i18n/fi","app/i18n/fr","app/i18n/hr","app/i18n/ru","app/i18n/it","app/i18n/eo","app/i18n/sv","app/i18n/nl","app/i18n/el_GR","app/i18n/es","app/i18n/vi","app/i18n/zh_CN"],function(e,n,t,o,i,a,r,s,l,m,c,d,p,u,f,h,g,b){"use strict";var v=function(e){switch(e){case"bg":case"cs":case"de":case"el":case"en":case"es":case"eo":case"fa":case"fi":case"hr":case"it":case"sv":case"nl":case"vi":case"zh":return function(e,n){return e[1===n?0:1]};case"fr":return function(e,n){return e[n>1?1:0]};case"ru":return function(e,n){return n%10==1&&n%100!=11?e[0]:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?e[1]:void 0!==e[2]?e[2]:e[1]};default:return null}},x=e.lang;v(x)||(x="en");var w={cs:t,de:o,el:f,en:i,eo:d,es:h,fa:a,fi:r,fr:s,it:c,hr:l,ru:m,sv:p,nl:u,vi:g,zh:b},y=v(x),k=function(e){return w[x][e]||i[e]||"???"};return{lang:x,translate:k,pluralize:function(e,n){var t;return t=k(e),t.indexOf("\n")>-1&&(t=y(t.split("\n"),+n)),t?t.replace("{{ n }}",+n):t}}}),define("app/lib/promise",[],function(){"use strict";var e=function(e){console.log(e)},n=function(){this.success=[],this.errors=[]};n.prototype.then=function(n,t){this.success.push(n),t?this.errors.push(t):this.errors.push(e)};var t=function(){this.promise=new n};t.prototype={promise:n,resolve:function(e){this.promise.success.forEach(function(n){window.setTimeout(function(){n(e)},0)})},reject:function(e){this.promise.errors.forEach(function(n){window.setTimeout(function(){n(e)},0)})}};var o=function(e,t){return e instanceof n?e.then(t):t(e)};return{defer:function(){return new t},when:o}}),define("app/globals",[],function(){"use strict";var e=function(){this.values=[]};return e.prototype.update=function(e){this.values.push((new Date).getTime()-e.getTime())},e.prototype.localTime=function(){return new Date((new Date).getTime()-this.values.reduce(function(e,n){return e+n},0)/this.values.length)},{offset:new e}}),define("app/api",["app/lib/promise","app/globals"],function(e,n){"use strict";for(var t,o,i=window.location.pathname,a=document.getElementsByTagName("script"),r=0;r<a.length;r++)if(a[r].hasAttribute("data-isso")){o=a[r].getAttribute("data-isso");break}if(!o){for(r=0;r<a.length;r++)if(a[r].getAttribute("async")||a[r].getAttribute("defer"))throw"Isso's automatic configuration detection failed, please refer to https://github.com/posativ/isso#client-configuration and add a custom `data-isso` attribute.";t=a[a.length-1],o=t.src.substring(0,t.src.length-"/js/embed.min.js".length)}"/"===o[o.length-1]&&(o=o.substring(0,o.length-1));var s=function(e,t,o,i,a){function r(){var e=s.getResponseHeader("Date");null!==e&&n.offset.update(new Date(e));var t=s.getResponseHeader("X-Set-Cookie");t&&t.match(/^isso-/)&&(document.cookie=t),s.status>=500?a&&a(s.body):i({status:s.status,body:s.responseText})}var s=new XMLHttpRequest;try{s.open(e,t,!0),s.withCredentials=!0,s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=function(){4===s.readyState&&r()}}catch(e){(a||console.log)(e.message)}s.send(o)},l=function(e){var n="";for(var t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n+=t+"="+encodeURIComponent(e[t])+"&");return n.substring(0,n.length-1)};return{endpoint:o,salt:"Eech7co8Ohloopo9Ol6baimi",create:function(n,t){var a=e.defer();return s("POST",o+"/new?"+l({uri:n||i}),JSON.stringify(t),function(e){201===e.status||202===e.status?a.resolve(JSON.parse(e.body)):a.reject(e.body)}),a.promise},modify:function(n,t){var i=e.defer();return s("PUT",o+"/id/"+n,JSON.stringify(t),function(e){403===e.status?i.reject("Not authorized to modify this comment!"):200===e.status?i.resolve(JSON.parse(e.body)):i.reject(e.body)}),i.promise},remove:function(n,t){var i=e.defer();return s("DELETE",o+"/id/"+n,JSON.stringify(t),function(e){403===e.status?i.reject("Not authorized to remove this comment!"):200===e.status?i.resolve(null===JSON.parse(e.body)):i.reject(e.body)}),i.promise},view:function(n,t){var i=e.defer();return s("GET",o+"/id/"+n+"?"+l({plain:t}),null,function(e){i.resolve(JSON.parse(e.body))}),i.promise},fetch:function(n,t,a,r,m){void 0===t&&(t="inf"),void 0===a&&(a="inf"),void 0===r&&(r=null);var c={uri:n||i,after:m,parent:r};null!==t&&(c.limit=t),null!==a&&(c.nested_limit=a);var d=e.defer();return s("GET",o+"/?"+l(c),null,function(e){200===e.status?d.resolve(JSON.parse(e.body)):404===e.status?d.resolve({total_replies:0}):d.reject(e.body)}),d.promise},count:function(n){var t=e.defer();return s("POST",o+"/count",JSON.stringify(n),function(e){200===e.status?t.resolve(JSON.parse(e.body)):t.reject(e.body)}),t.promise},like:function(n){var t=e.defer();return s("POST",o+"/id/"+n+"/like",null,function(e){t.resolve(JSON.parse(e.body))}),t.promise},dislike:function(n){var t=e.defer();return s("POST",o+"/id/"+n+"/dislike",null,function(e){t.resolve(JSON.parse(e.body))}),t.promise},openidLogout:function(e){s("GET",o+"/openid/logout?state="+e,null,function(e){})},openidStatus:function(n){var t=e.defer();return s("GET",o+"/openid/status?state="+n,null,function(e){t.resolve(JSON.parse(e.body))}),t.promise}}}),define("app/dom",[],function(){"use strict";function e(e){this.obj=e,this.replace=function(n){var o=t.htmlify(n);return e.parentNode.replaceChild(o.obj,e),o},this.prepend=function(n){var o=t.htmlify(n);return e.insertBefore(o.obj,e.firstChild),o},this.append=function(n){var o=t.htmlify(n);return e.appendChild(o.obj),o},this.insertAfter=function(n){var o=t.htmlify(n);return e.parentNode.insertBefore(o.obj,e.nextSibling),o},this.on=function(n,t,o){e.addEventListener(n,function(e){t(e),(void 0===o||o)&&e.preventDefault()})},this.toggle=function(e,t,o){var i=new n(t,o);this.on(e,function(){i.next()})},this.detach=function(){return e.parentNode.removeChild(this.obj),this},this.remove=function(){e.parentNode.removeChild(this.obj)},this.show=function(){e.style.display="block"},this.showInline=function(){e.style.display="inline"},this.hide=function(){e.style.display="none"},this.visible=function(){e.style.visibility="visible"},this.invisible=function(){e.style.visibility="hidden"},this.setText=function(n){e.textContent=n},this.setHtml=function(n){e.innerHTML=n},this.blur=function(){e.blur()},this.focus=function(){e.focus()},this.scrollIntoView=function(n){e.scrollIntoView(n)},this.setAttribute=function(n,t){e.setAttribute(n,t)},this.getAttribute=function(n){return e.getAttribute(n)},this.classList=e.classList,Object.defineProperties(this,{textContent:{get:function(){return e.textContent},set:function(n){e.textContent=n}},innerHTML:{get:function(){return e.innerHTML},set:function(n){e.innerHTML=n}},value:{get:function(){return e.value},set:function(n){e.value=n}},placeholder:{get:function(){return e.placeholder},set:function(n){e.placeholder=n}}})}var n=function(e,n){this.state=!1,this.next=function(){this.state?(this.state=!1,n(this)):(this.state=!0,e(this))},this.wait=function(){this.state=!this.state}},t=function(n,t,o){void 0===o&&(o=!0),t||(t=window.document),t instanceof e&&(t=t.obj);var i=[].slice.call(t.querySelectorAll(n),0);return 0===i.length?null:1===i.length&&o?new e(i[0]):(i=[].slice.call(i,0),i.map(function(n){return new e(n)}))};return t.htmlify=function(n){if(n instanceof e)return n;if(n instanceof window.Element)return new e(n);var o=t.new("div");return o.innerHTML=n,new e(o.firstChild)},t.new=function(e,n){var t=document.createElement(e.split(".")[0]);return e.split(".").slice(1).forEach(function(e){t.classList.add(e)}),["A","LINK"].indexOf(t.nodeName)>-1&&(t.href="#"),n||0===n||(n=""),["TEXTAREA","INPUT"].indexOf(t.nodeName)>-1?t.value=n:t.textContent=n,t},t.each=function(e,n){Array.prototype.forEach.call(document.getElementsByTagName(e),n)},t.eachByClass=function(e,n){Array.prototype.forEach.call(document.getElementsByClassName(e),n)},t}),define("app/utils",["app/i18n"],function(e){"use strict";var n,t=function(e){return(document.cookie.match("(^|; )"+e+"=([^;]*)")||0)[2]},o=function(e,n,t){return t=t||"0",e+="",e.length>=n?e:new Array(n-e.length+1).join(t)+e},i=function(n,t){var o=(n.getTime()-t.getTime())/1e3;(isNaN(o)||o<0)&&(o=0);var i=Math.ceil(o/60),a=Math.ceil(i/60),r=Math.ceil(a/24);return o<=45&&e.translate("date-now")||o<=90&&e.pluralize("date-minute",1)||i<=45&&e.pluralize("date-minute",i)||i<=90&&e.pluralize("date-hour",1)||a<=22&&e.pluralize("date-hour",a)||a<=36&&e.pluralize("date-day",1)||r<=5&&e.pluralize("date-day",r)||r<=8&&e.pluralize("date-week",1)||r<=21&&e.pluralize("date-week",Math.ceil(r/7))||r<=45&&e.pluralize("date-month",1)||r<=345&&e.pluralize("date-month",Math.ceil(r/30))||r<=547&&e.pluralize("date-year",1)||e.pluralize("date-year",Math.ceil(r/365.25))},a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},r=function(e){return String(e).replace(/[&<>"'\/]/g,function(e){return a[e]})},s=function(e){var n=document.createElement("div");return n.innerHTML=e.replace(/<div><br><\/div>/gi,"<br>").replace(/<div>/gi,"<br>").replace(/<br>/gi,"\n").replace(/&nbsp;/gi," "),n.textContent.trim()},l=function(e){return e=r(e),e.replace(/\n\n/gi,"<br><div><br></div>").replace(/\n/gi,"<br>")};try{localStorage.setItem("x","y"),localStorage.removeItem("x"),n=localStorage}catch(e){n=function(e){return{setItem:function(n,t){e[n]=t},getItem:function(n){return void 0!==e[n]?e[n]:null},removeItem:function(n){delete e[n]}}}({})}return{cookie:t,pad:o,ago:i,text:s,detext:l,localStorageImpl:n}}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("libjs-jade-runtime",[],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.jade=e()}}(function(){return function e(n,t,o){function i(r,s){if(!t[r]){if(!n[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);var m=new Error("Cannot find module '"+r+"'");throw m.code="MODULE_NOT_FOUND",m}var c=t[r]={exports:{}};n[r][0].call(c.exports,function(e){var t=n[r][1][e];return i(t||e)},c,c.exports,e,n,t,o)}return t[r].exports}for(var a="function"==typeof require&&require,r=0;r<o.length;r++)i(o[r]);return i}({1:[function(e,n,t){"use strict";function o(e){return null!=e&&""!==e}function i(e){return(Array.isArray(e)?e.map(i):e&&"object"==typeof e?Object.keys(e).filter(function(n){return e[n]}):[e]).filter(o).join(" ")}function a(e){return s[e]||e}function r(e){var n=String(e).replace(l,a);return n===""+e?e:n}t.merge=function e(n,t){if(1===arguments.length){for(var i=n[0],a=1;a<n.length;a++)i=e(i,n[a]);return i}var r=n.class,s=t.class;(r||s)&&(r=r||[],s=s||[],Array.isArray(r)||(r=[r]),Array.isArray(s)||(s=[s]),n.class=r.concat(s).filter(o));for(var l in t)"class"!=l&&(n[l]=t[l]);return n},t.joinClasses=i,t.cls=function(e,n){
for(var o=[],a=0;a<e.length;a++)n&&n[a]?o.push(t.escape(i([e[a]]))):o.push(i(e[a]));var r=i(o);return r.length?' class="'+r+'"':""},t.style=function(e){return e&&"object"==typeof e?Object.keys(e).map(function(n){return n+":"+e[n]}).join(";"):e},t.attr=function(e,n,o,i){return"style"===e&&(n=t.style(n)),"boolean"==typeof n||null==n?n?" "+(i?e:e+'="'+e+'"'):"":0==e.indexOf("data")&&"string"!=typeof n?(-1!==JSON.stringify(n).indexOf("&")&&console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),n&&"function"==typeof n.toISOString&&console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0")," "+e+"='"+JSON.stringify(n).replace(/'/g,"&apos;")+"'"):o?(n&&"function"==typeof n.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+t.escape(n)+'"'):(n&&"function"==typeof n.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+n+'"')},t.attrs=function(e,n){var o=[],a=Object.keys(e);if(a.length)for(var r=0;r<a.length;++r){var s=a[r],l=e[s];"class"==s?(l=i(l))&&o.push(" "+s+'="'+l+'"'):o.push(t.attr(s,l,!1,n))}return o.join("")};var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},l=/[&<>"]/g;t.escape=r,t.rethrow=function n(t,o,i,a){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&o||a))throw t.message+=" on line "+i,t;try{a=a||e("fs").readFileSync(o,"utf8")}catch(e){n(t,null,i)}var r=3,s=a.split("\n"),l=Math.max(i-r,0),m=Math.min(s.length,i+r),r=s.slice(l,m).map(function(e,n){var t=n+l+1;return(t==i?"  > ":"    ")+t+"| "+e}).join("\n");throw t.path=o,t.message=(o||"Jade")+":"+i+"\n"+r+"\n\n"+t.message,t},t.DebugItem=function(e,n){this.lineno=e,this.filename=n}},{fs:2}],2:[function(e,n,t){},{}]},{},[1])(1)}),define("jade",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("jade!app/text/postbox",function(){return function(e){var n,t=[],o=e||{};return function(e,o,i,a){t.push('<div class="isso-postbox"><img class="avatar"/><div class="form-wrapper"><div class="textarea-wrapper"><div contenteditable="true" class="textarea placeholder">'+jade.escape(null==(n=i("postbox-text"))?"":n)+'</div></div><section class="auth-section"><div class="auth-not-loggedin"><div class="auth-login-optional"><p class="input-wrapper"><input type="text" name="author"'+jade.attr("placeholder",i("postbox-author"),!0,!1)+jade.attr("value",null!==e?""+e:"",!0,!1)+'/></p><p class="input-wrapper"><input type="email" name="email"'+jade.attr("placeholder",i("postbox-email"),!0,!1)+jade.attr("value",null!=o?""+o:"",!0,!1)+'/></p><p class="input-wrapper"><input type="text" name="website"'+jade.attr("placeholder",i("postbox-website"),!0,!1)+jade.attr("value",null!=a?""+a:"",!0,!1)+'/></p><p class="login-separator">'+jade.escape(null==(n=i("auth-login"))?"":n)+'</p></div><div class="auth-login-mandatory"><p class="login-separator">'+jade.escape(null==(n=i("auth-must-login"))?"":n)+'</p></div><p class="login-wrapper"><a href="#" class="login-link-openid"><img'+jade.attr("alt",i("auth-openid"),!0,!1)+'/></a><a href="#" class="login-link-facebook"><img'+jade.attr("alt",i("auth-facebook"),!0,!1)+'/></a><a href="#" class="login-link-google"><img'+jade.attr("alt",i("auth-google"),!0,!1)+'/></a></p></div><div class="auth-loggedin-openid"><p class="auth-openid-name"></p><p class="logout-wrapper"><a href="#" class="logout-link-openid">'+jade.escape(null==(n=i("logout"))?"":n)+'</a></p></div><div class="auth-loggedin-facebook"><p class="auth-facebook-name"></p><p class="logout-wrapper"><a href="#" class="logout-link-facebook">'+jade.escape(null==(n=i("logout"))?"":n)+'</a></p></div><div class="auth-loggedin-google"><p class="auth-google-name"></p><p class="logout-wrapper"><a href="#" class="logout-link-google">'+jade.escape(null==(n=i("logout"))?"":n)+'</a></p></div><p class="post-action"><input type="submit"'+jade.attr("value",i("postbox-submit"),!0,!1)+'/></p></section><p class="markdown-note"><a target="_blank" href="https://en.wikipedia.org/wiki/Markdown">Markdown</a>'+jade.escape(null==(n=i("markdown-note"))?"":n)+'</p><p class="login-note"><span class="login-note-service"></span>'+jade.escape(null==(n=i("login-note"))?"":n)+"</p></div></div>")}.call(this,"author"in o?o.author:"undefined"!=typeof author?author:void 0,"email"in o?o.email:"undefined"!=typeof email?email:void 0,"i18n"in o?o.i18n:"undefined"!=typeof i18n?i18n:void 0,"website"in o?o.website:"undefined"!=typeof website?website:void 0),t.join("")}}),define("jade!app/text/comment",function(){return function(e){var n,t=[],o=e||{};return function(e,o,i,a,r,s,l){t.push("<div"+jade.attr("id","isso-"+o.id,!0,!1)+' class="isso-comment">'),i.avatar&&(t.push('<div class="avatar">'),e(o.pictureURL)?t.push("<a"+jade.attr("href",""+o.website,!0,!1)+"><img"+jade.attr("src",""+o.pictureURL,!0,!1)+"/></a>"):t.push("<svg"+jade.attr("data-hash",""+o.hash,!0,!1)+"></svg>"),t.push("</div>")),t.push('<div class="text-wrapper"><div role="meta" class="isso-comment-header">'),e(o.website)?t.push("<a"+jade.attr("href",""+o.website,!0,!1)+' rel="nofollow" class="author">'+jade.escape(null==(n=e(o.author)?o.author:s("comment-anonymous"))?"":n)+"</a>"):t.push('<span class="author">'+jade.escape(null==(n=e(o.author)?o.author:s("comment-anonymous"))?"":n)+"</span>"),t.push('<span class="spacer">&bull;</span>'),e(o.role_name)?t.push("<span"+jade.cls(["role "+o.role_name],[!0])+">"+jade.escape(null==(n=o.role_string)?"":n)+'</span><span class="spacer">&bull;</span>'):"openid"==o.auth_method&&t.push('<span class="identifier-heading">'+jade.escape(null==(n=s("openid-identifier"))?"":n)+'</span><span class="identifier-value">'+jade.escape(null==(n=o.auth_id)?"":n)+'</span><span class="spacer">&bull;</span>'),t.push("<a"+jade.attr("href","#isso-"+o.id,!0,!1)+' class="permalink"><time'+jade.attr("title",""+r(o.created),!0,!1)+jade.attr("datetime",""+a(o.created),!0,!1)+'></time></a><span class="note">'+jade.escape(null==(n=2==o.mode?s("comment-queued"):4==o.mode?s("comment-deleted"):"")?"":n)+'</span></div><div class="text">'),4==o.mode?t.push("<p>&nbsp;</p>"):t.push(null==(n=o.text)?"":n),t.push('</div><div class="isso-comment-footer">'),i.vote&&t.push('<a href="#" class="upvote">'+(null==(n=l["arrow-up"])?"":n)+'</a><span class="spacer">|</span><a href="#" class="downvote">'+(null==(n=l["arrow-down"])?"":n)+"</a>"),t.push('<a href="#" class="reply">'+jade.escape(null==(n=s("comment-reply"))?"":n)+'</a><a href="#" class="edit">'+jade.escape(null==(n=s("comment-edit"))?"":n)+'</a><a href="#" class="delete">'+jade.escape(null==(n=s("comment-delete"))?"":n)+'</a></div><div class="isso-follow-up"></div></div></div>')}.call(this,"bool"in o?o.bool:"undefined"!=typeof bool?bool:void 0,"comment"in o?o.comment:"undefined"!=typeof comment?comment:void 0,"conf"in o?o.conf:"undefined"!=typeof conf?conf:void 0,"datetime"in o?o.datetime:"undefined"!=typeof datetime?datetime:void 0,"humanize"in o?o.humanize:"undefined"!=typeof humanize?humanize:void 0,"i18n"in o?o.i18n:"undefined"!=typeof i18n?i18n:void 0,"svg"in o?o.svg:"undefined"!=typeof svg?svg:void 0),t.join("")}}),define("jade!app/text/comment-loader",function(){return function(e){var n,t=[],o=e||{};return function(e,o){t.push("<div"+jade.attr("id","isso-loader-"+e.name,!0,!1)+' class="isso-comment-loader"><a href="#" class="load_hidden">'+jade.escape(null==(n=o("comment-hidden",e.hidden_replies))?"":n)+"</a></div>")}.call(this,"comment"in o?o.comment:"undefined"!=typeof comment?comment:void 0,"pluralize"in o?o.pluralize:"undefined"!=typeof pluralize?pluralize:void 0),t.join("")}}),define("jade!app/text/openid-identifier",function(){return function(e){var n,t=[],o=e||{};return function(e){t.push('<form id="isso-openid-login-form" method="GET"><div class="isso-openid-form-box"><p class="isso-openid-intro-line"><img id="isso-openid-logo" alt="OpenID logo"/>'+jade.escape(null==(n=e("openid-intro"))?"":n)+'</p><p class="isso-openid-login-line"><input type="text" id="isso-openid-identifier" name="isso-openid-identifier"/><input type="submit" id="isso-openid-submit"'+jade.attr("value",e("login"),!0,!1)+'/></p><p class="isso-openid-hint-line">'+jade.escape(null==(n=e("openid-hints"))?"":n)+"</p></div></form>")}.call(this,"i18n"in o?o.i18n:"undefined"!=typeof i18n?i18n:void 0),t.join("")}}),define("app/jade",["libjs-jade-runtime","app/utils","jade!app/text/postbox","jade!app/text/comment","jade!app/text/comment-loader","jade!app/text/openid-identifier"],function(runtime,utils,tt_postbox,tt_comment,tt_comment_loader,tt_openid_identifier){"use strict";var globals={},templates={},load=function(name,js){templates[name]=function(jade){var fn;return eval("fn = "+js),fn}(runtime)},set=function(e,n){globals[e]=n};return load("postbox",tt_postbox),load("comment",tt_comment),load("comment-loader",tt_comment_loader),load("openid-identifier",tt_openid_identifier),set("bool",function(e){return!!e}),set("humanize",function(e){return"object"!=typeof e&&(e=new Date(1e3*parseInt(e,10))),e.toString()}),set("datetime",function(e){return"object"!=typeof e&&(e=new Date(1e3*parseInt(e,10))),[e.getUTCFullYear(),utils.pad(e.getUTCMonth(),2),utils.pad(e.getUTCDay(),2)].join("-")+"T"+[utils.pad(e.getUTCHours(),2),utils.pad(e.getUTCMinutes(),2),utils.pad(e.getUTCSeconds(),2)].join(":")+"Z"}),{set:set,render:function(e,n){var t;if(!templates[e])throw new Error("Template not found: '"+e+"'");n=n||{};var o=[];for(var i in n)n.hasOwnProperty(i)&&!globals.hasOwnProperty(i)&&(o.push(i),globals[i]=n[i]);t=templates[e](globals);for(var a=0;a<o.length;a++)delete globals[o[a]];return t}}}),define("app/lib/editor",["app/dom","app/i18n"],function(e,n){"use strict";return function(t){return t=e.htmlify(t),t.setAttribute("contentEditable",!0),t.on("focus",function(){t.classList.contains("placeholder")&&(t.innerHTML="",t.classList.remove("placeholder"))}),t.on("blur",function(){0===t.textContent.length&&(t.textContent=n.translate("postbox-text"),t.classList.add("placeholder"))}),t}}),define("app/lib/identicons",["app/lib/promise","app/config"],function(e,n){"use strict";var t=function(e,n){return e.length>=n?e:new Array(n-e.length+1).join("0")+e},o=function(e,n,t,o,i,a){var r=document.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("x",o+n*i),r.setAttribute("y",o+t*i),r.setAttribute("width",i),r.setAttribute("height",i),r.setAttribute("style","fill: "+a),e.appendChild(r)},i=function(i,a,r){var s=document.createElementNS("http://www.w3.org/2000/svg","svg");return s.setAttribute("version","1.1"),s.setAttribute("viewBox","0 0 "+r+" "+r),s.setAttribute("preserveAspectRatio","xMinYMin meet"),s.setAttribute("shape-rendering","crispEdges"),o(s,0,0,0,r+2*a,n["avatar-bg"]),null===typeof i?s:(e.when(i,function(e){var i=t((parseInt(e,16)%Math.pow(2,18)).toString(2),18),r=0;s.setAttribute("data-hash",e);for(var l=parseInt(i.substring(i.length-3,i.length),2),m=n["avatar-fg"][l%n["avatar-fg"].length],c=0;c<Math.ceil(2.5);c++)for(var d=0;d<5;d++)"1"===i.charAt(r)&&(o(s,c,d,a,8,m),c<Math.floor(2.5)&&o(s,4-c,d,a,8,m)),r++}),s)};return{generate:i,blank:function(e,n){var t=parseInt([0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,0].join(""),2).toString(16),o=i(t,e,n);return o.setAttribute("className","blank"),o}}}),define("app/lib",["require","app/lib/editor","app/lib/identicons"],function(e){return{editorify:e("app/lib/editor"),identicons:e("app/lib/identicons")}}),define("app/auth/openid",["app/dom","app/config","app/api","app/jade","app/i18n"],function(e,n,t,o,i){"use strict";var a=null,r=!1,s=null,l=null,m=function(e){if(n["openid-enabled"]){a=e;var o=JSON.parse(localStorage.getItem("login_method")),i=JSON.parse(localStorage.getItem("openid_session_id")),m=JSON.parse(localStorage.getItem("author_data"));"openid"==o&&i&&t.openidStatus(i).then(function(e){e.loggedin&&(r=!0,s=i,l=m),a.updateAllPostboxes()}),window.addEventListener("message",function(e){(e.origin||e.originalEvent.origin)==t.endpoint&&(r=!0,s=e.data.state,l={identifier:e.data.identifier,name:e.data.name,email:e.data.email,pictureURL:e.data.picture,website:e.data.website},localStorage.setItem("login_method",JSON.stringify("openid")),localStorage.setItem("openid_session_id",JSON.stringify(s)),localStorage.setItem("author_data",JSON.stringify(l)),a.updateAllPostboxes())},!1)}},c=function(o){n["openid-enabled"]&&(r?(e(".auth-not-loggedin",o).hide(),e(".auth-loggedin-openid",o).showInline(),e(".auth-openid-name",o).innerHTML=l.name,l.pictureURL?e(".isso-postbox .avatar",o).setAttribute("src",l.pictureURL):e(".isso-postbox .avatar",o).hide(),e(".isso-postbox .avatar",o).show()):(e(".auth-loggedin-openid",o).hide(),e(".login-link-openid",o).showInline(),e(".login-link-openid > img",o).setAttribute("src",t.endpoint+"/images/openid-icon-32x32.png")))};return{init:m,initPostbox:function(m){n["openid-enabled"]&&(c(m),e(".logout-link-openid",m).on("click",function(){t.openidLogout(s),r=!1,s=null,l=null,localStorage.removeItem("login_method"),localStorage.removeItem("openid_session_id"),localStorage.removeItem("author_data"),a.updateAllPostboxes()}),e(".login-link-openid",m).on("click",function(){var e=window.open("","OpenID Connect login","width=500, height=500, menubar=no, location=yes, toolbar=no, status=yes");e.document.head.innerHTML="<title>"+i.translate("openid-title")+'</title><link rel="stylesheet" type="text/css" href="'+t.endpoint+'/css/isso.css">',e.document.body.setAttribute("class","isso-openid-popup"),e.document.body.innerHTML=o.render("openid-identifier",{}),e.document.getElementById("isso-openid-logo").setAttribute("src",t.endpoint+"/images/openid-icon-32x32.png"),e.document.getElementById("isso-openid-login-form").setAttribute("action",t.endpoint+"/openid/login")}))},updatePostbox:c,isLoggedIn:function(){return r},getAuthorData:function(){return{network:"openid",id:l.identifier,idToken:s,pictureURL:l.pictureURL,name:l.name,email:l.email,website:l.website}},prepareComment:function(e){}}}),define("app/auth/facebook",["app/dom","app/config","app/api"],function(e,n,t){"use strict";var o=null,i={inactive:0,loadingSDK:1,loggedOut:2,loggedIn:3},a=i.inactive,r=!1,s=null,l=null,m=function(e){"connected"===e.status?(l=e.authResponse.accessToken,FB.api("/me",{fields:["name","email"]},function(e){a=i.loggedIn,s={uid:e.id,name:e.name,email:e.email||""},localStorage.setItem("login_method",JSON.stringify("facebook")),o.updateAllPostboxes(),o.clearPostboxNote()})):(a===i.loadingSDK&&r?o.showPostboxNote("Facebook"):a===i.loggedIn&&localStorage.removeItem("login_method"),a=i.loggedOut,s=null,l=null,o.updateAllPostboxes())},c=function(){a=i.loadingSDK,function(e,n,t){var o,i=e.getElementsByTagName(n)[0];e.getElementById(t)||(o=e.createElement(n),o.id=t,o.src="//connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(o,i))}(document,"script","facebook-jssdk")},d=function(e){if(n["facebook-enabled"]){o=e,window.fbAsyncInit=function(){FB.init({appId:n["facebook-app-id"],cookie:!0,xfbml:!0,version:"v2.5"}),FB.getLoginStatus(function(e){m(e)})};"facebook"==JSON.parse(localStorage.getItem("login_method"))&&c()}},p=function(n){a===i.loggedIn?(e(".auth-not-loggedin",n).hide(),e(".auth-loggedin-facebook",n).showInline(),e(".auth-facebook-name",n).innerHTML=s.name,e(".isso-postbox .avatar",n).setAttribute("src","//graph.facebook.com/"+s.uid+"/picture"),e(".isso-postbox .avatar",n).show()):(e(".auth-loggedin-facebook",n).hide(),e(".login-link-facebook",n).showInline(),e(".login-link-facebook > img",n).setAttribute("src",t.endpoint+"/images/facebook-color.png"))};return{init:d,initPostbox:function(t){n["facebook-enabled"]&&(p(t),e(".logout-link-facebook",t).on("click",function(){FB.logout(function(e){m(e)})}),e(".login-link-facebook",t).on("click",function(){a===i.inactive?(r=!0,c()):a===i.loggedOut&&FB.login(function(e){m(e)},{scope:"public_profile,email"})}))},updatePostbox:p,isLoggedIn:function(){return a===i.loggedIn},getAuthorData:function(){return{network:"facebook",id:s.uid,idToken:l,pictureURL:null,name:s.name,email:s.email,website:""}},prepareComment:function(e){e.website="//www.facebook.com/"+e.auth_id,e.pictureURL="//graph.facebook.com/"+e.auth_id+"/picture"}}}),define("app/auth/google",["app/dom","app/config","app/api"],function(e,n,t){"use strict";var o=null,i={inactive:0,loadingSDK:1,loggedOut:2,loggedIn:3},a=i.inactive,r=!1,s=null,l=null,m=function(e){if(n["google-enabled"]){o=e;"google"==JSON.parse(localStorage.getItem("login_method"))&&d()}},c=function(e){if(e){var n=l.currentUser.get(),t=n.getBasicProfile();a=i.loggedIn,s={uid:t.getId(),name:t.getName(),email:t.getEmail()||"",pictureURL:t.getImageUrl(),idToken:n.getAuthResponse().id_token},localStorage.setItem("login_method",JSON.stringify("google")),o.updateAllPostboxes(),o.clearPostboxNote()}else a===i.loggedIn&&localStorage.removeItem("login_method"),a=i.loggedOut,s=null,o.updateAllPostboxes()},d=function(){var e=document.createElement("script");e.src="https://apis.google.com/js/platform.js",document.head.appendChild(e),e.addEventListener("load",function(e){gapi.load("auth2",function(){l=gapi.auth2.init({client_id:n["google-client-id"],cookiepolicy:"single_host_origin"}),l.isSignedIn.listen(c),a=i.loggedOut,r&&o.showPostboxNote("Google+"),o.updateAllPostboxes()})})},p=function(n){a===i.loggedIn?(e(".auth-not-loggedin",n).hide(),e(".auth-loggedin-google",n).showInline(),e(".auth-google-name",n).innerHTML=s.name,e(".isso-postbox .avatar",n).setAttribute("src",s.pictureURL),e(".isso-postbox .avatar",n).show()):(e(".auth-loggedin-google",n).hide(),e(".login-link-google",n).showInline(),e(".login-link-google > img",n).setAttribute("src",t.endpoint+"/images/googleplus-color.png"))};return{init:m,initPostbox:function(t){n["google-enabled"]&&(p(t),e(".logout-link-google",t).on("click",function(){l.signOut()}),e(".login-link-google",t).on("click",function(){a===i.inactive?(r=!0,d()):a===i.loggedOut&&l.signIn()}))},updatePostbox:p,isLoggedIn:function(){return a===i.loggedIn},getAuthorData:function(){return{network:"google",id:s.uid,idToken:s.idToken,pictureURL:s.pictureURL,name:s.name,email:s.email,website:""}},prepareComment:function(e){e.website="//plus.google.com/"+e.auth_id+"/posts"}}}),define("app/isso",["app/dom","app/utils","app/config","app/api","app/jade","app/i18n","app/lib","app/globals","app/auth/openid","app/auth/facebook","app/auth/google"],function(e,n,t,o,i,a,r,s,l,m,c){"use strict";var d=function(a){var s=n.localStorageImpl,d=e.htmlify(i.render("postbox",{author:JSON.parse(s.getItem("author")),email:JSON.parse(s.getItem("email")),website:JSON.parse(s.getItem("website"))}));return d.onsuccess=function(){},d.validate=function(){return n.text(e(".textarea",this).innerHTML).length<3||e(".textarea",this).classList.contains("placeholder")?(e(".textarea",this).focus(),!1):t["require-email"]&&!f()&&e("[name='email']",this).value.length<=0?(e("[name='email']",this).focus(),!1):!(t["require-author"]&&e("[name='author']",this).value.length<=0)||(e("[name='author']",this).focus(),!1)},t["require-email"]&&(e("[name='email']",d).placeholder=e("[name='email']",d).placeholder.replace(/ \(.*\)/,"")),t["require-author"]&&(e("[name='author']",d).placeholder=e("[name='author']",d).placeholder.replace(/ \(.*\)/,"")),e("[type=submit]",d).on("click",function(){var t;d.validate()&&(t=p(),null===t.network&&(t.name=e("[name=author]",d).value||null,t.email=e("[name=email]",d).value||null,t.website=e("[name=website]",d).value||null,s.setItem("author",JSON.stringify(t.name)),s.setItem("email",JSON.stringify(t.email)),s.setItem("website",JSON.stringify(t.website))),o.create(e("#isso-thread").getAttribute("data-isso-id"),{auth_method:t.network,auth_id:t.id,id_token:t.idToken,pictureURL:t.pictureURL,author:t.name,email:t.email,website:t.website,text:n.text(e(".textarea",d).innerHTML),parent:a||null,title:e("#isso-thread").getAttribute("data-title")||null}).then(function(n){e(".textarea",d).innerHTML="",e(".textarea",d).blur(),y(n,!0),null!==a&&d.onsuccess()}))}),r.editorify(e(".textarea",d)),l.initPostbox(d),m.initPostbox(d),c.initPostbox(d),u(d),d},p=function(){return l.isLoggedIn()?l.getAuthorData():m.isLoggedIn()?m.getAuthorData():c.isLoggedIn()?c.getAuthorData():{network:null,id:null,idToken:null,pictureURL:null,name:null,email:null,website:null}},u=function(n){f()?e(".post-action",n).showInline():(t["allow-unauthorized"]?(e(".auth-login-optional",n).showInline(),e(".auth-login-mandatory",n).hide(),e(".post-action",n).showInline(),t["openid-enabled"]||t["facebook-enabled"]||t["google-enabled"]?e(".auth-login-optional .login-separator",n).showInline():e(".auth-login-optional .login-separator",n).hide()):(e(".auth-login-optional",n).hide(),e(".auth-login-mandatory",n).showInline(),e(".post-action",n).hide()),e(".auth-not-loggedin",n).showInline(),e(".isso-postbox .avatar",n).hide())},f=function(){return m.isLoggedIn()||c.isLoggedIn()||l.isLoggedIn()},h=function(){e.eachByClass("isso-postbox",function(e){l.updatePostbox(e),m.updatePostbox(e),c.updatePostbox(e),u(e)}),e.eachByClass("isso-comment",function(e){w(e)})},g=function(n){e.eachByClass("isso-postbox",function(t){e(".login-note-service",t).innerHTML=n,e(".login-note",t).visible()})},b=function(){e.eachByClass("isso-postbox",function(n){e(".login-note",n).invisible()})},v=function(n,a){var r;null===n.id?(r=e("#isso-root"),n.name="null"):(r=e("#isso-"+n.id+" > .text-wrapper > .isso-follow-up"),n.name=n.id);var s=e.htmlify(i.render("comment-loader",{comment:n}));r.append(s),e("a.load_hidden",s).on("click",function(){s.remove(),o.fetch(e("#isso-thread").getAttribute("data-isso-id"),t["reveal-on-click"],t["max-comments-nested"],n.id,a).then(function(e){if(0!==e.total_replies){var n=0;e.replies.forEach(function(e){y(e,!1),e.created>n&&(n=e.created)}),e.hidden_replies>0&&v(e,n)}},function(e){console.log(e)})})},x=function(n,t){t?(e("a.edit",n,!1)[0].showInline(),e("a.delete",n,!1)[0].showInline()):(e("a.edit",n,!1)[0].hide(),e("a.delete",n,!1)[0].hide())},w=function(e){var o=parseInt(e.getAttribute("data-created"),10),i=t["max-age"],a=(new Date).getTime()/1e3;if(a>o+i)return void x(e,!1);var r=e.getAttribute("data-comment-id"),s=e.getAttribute("data-auth-method"),l=e.getAttribute("data-auth-id"),m=p();if("null"!=s){if(s!=m.network||l!=m.id)return void x(e,!1)}else if(!n.cookie("isso-"+r))return void x(e,!1);x(e,!0),setTimeout(function(){x(e,!1)},1e3*(o+i-a))},y=function(u,f){"openid"===u.auth_method?l.prepareComment(u):"facebook"===u.auth_method?m.prepareComment(u):"google"===u.auth_method?c.prepareComment(u):u.pictureURL=!1;var h=e.htmlify(i.render("comment",{comment:u}));h.setAttribute("data-comment-id",u.id),h.setAttribute("data-auth-method",u.auth_method),h.setAttribute("data-auth-id",u.auth_id),h.setAttribute("data-created",u.created);var g=function(){e(".permalink > time",h).textContent=n.ago(s.offset.localTime(),new Date(1e3*parseInt(u.created,10))),setTimeout(g,6e4)};g(),t.avatar&&!u.pictureURL&&e("div.avatar > svg",h).replace(r.identicons.generate(u.hash,4,48));var b;b=e(null===u.parent?"#isso-root":"#isso-"+u.parent+" > .text-wrapper > .isso-follow-up"),b.append(h),f&&h.scrollIntoView();var x=e("#isso-"+u.id+" > .text-wrapper > .isso-comment-footer"),k=e("#isso-"+u.id+" > .text-wrapper > .isso-comment-header"),j=e("#isso-"+u.id+" > .text-wrapper > .text"),I=null;if(e("a.reply",x).toggle("click",function(n){I=x.insertAfter(new d(null===u.parent?u.id:u.parent)),I.onsuccess=function(){n.next()},e(".textarea",I).focus(),e("a.reply",x).textContent=a.translate("comment-close")},function(){I.remove(),e("a.reply",x).textContent=a.translate("comment-reply")}),t.vote){var S=t["vote-levels"];"string"==typeof S&&(S=S.split(","));var C=function(n){var t=e("span.votes",x);if(null===t?x.prepend(e.new("span.votes",n)):t.textContent=n,n?h.classList.remove("isso-no-votes"):h.classList.add("isso-no-votes"),S)for(var o=!0,i=0;i<=S.length;i++)o&&(i>=S.length||n<S[i])?(h.classList.add("isso-vote-level-"+i),o=!1):h.classList.remove("isso-vote-level-"+i)};e("a.upvote",x).on("click",function(){o.like(u.id).then(function(e){C(e.likes-e.dislikes)})}),e("a.downvote",x).on("click",function(){o.dislike(u.id).then(function(e){C(e.likes-e.dislikes)})}),C(u.likes-u.dislikes)}e("a.edit",x).toggle("click",function(i){var s=e("a.edit",x),l=t.avatar?e(".avatar",h,!1)[0]:null;s.textContent=a.translate("comment-save"),s.insertAfter(e.new("a.cancel",a.translate("comment-cancel"))).on("click",function(){i.canceled=!0,i.next()}),i.canceled=!1,o.view(u.id,1).then(function(t){var o=r.editorify(e.new("div.textarea"));o.innerHTML=n.detext(t.text),o.focus(),j.classList.remove("text"),j.classList.add("textarea-wrapper"),j.textContent="",j.append(o)}),null!==l&&l.hide()},function(i){var r=e(".textarea",j),s=t.avatar?e(".avatar",h,!1)[0]:null;if(i.canceled||null===r)j.innerHTML=u.text;else{if(n.text(r.innerHTML).length<3)return r.focus(),void i.wait();var l=p();o.modify(u.id,{auth_method:l.network,auth_id:l.id,id_token:l.idToken,text:n.text(r.innerHTML)}).then(function(e){j.innerHTML=e.text,u.text=e.text})}j.classList.remove("textarea-wrapper"),j.classList.add("text"),null!==s&&s.show(),e("a.cancel",x).remove(),e("a.edit",x).textContent=a.translate("comment-edit")}),e("a.delete",x).toggle("click",function(n){var t=e("a.delete",x),o=!n.state;t.textContent=a.translate("comment-confirm"),t.on("mouseout",function(){t.textContent=a.translate("comment-delete"),n.state=o,t.onmouseout=null})},function(){var n=e("a.delete",x),t=p();o.remove(u.id,{auth_method:t.network,auth_id:t.id,id_token:t.idToken}).then(function(t){t?h.remove():(e("span.note",k).textContent=a.translate("comment-deleted"),j.innerHTML="<p>&nbsp;</p>",e("a.edit",x).remove(),e("a.delete",x).remove()),n.textContent=a.translate("comment-delete")})}),w(h);var A=function(e){n.cookie("isso-"+u.id)?setTimeout(function(){A(e)},15e3):x.append(e)};if(!t["reply-to-self"]&&n.cookie("isso-"+u.id)&&A(e("a.reply",x).detach()),u.hasOwnProperty("replies")){var L=0;u.replies.forEach(function(e){y(e,!1),e.created>L&&(L=e.created)}),u.hidden_replies>0&&v(u,L)}};return{insert:y,insert_loader:v,updateAllPostboxes:h,showPostboxNote:g,clearPostboxNote:b,Postbox:d}}),define("app/count",["app/api","app/dom","app/i18n"],function(e,n,t){return function(){var o={};n.each("a",function(e){if(e.href.match(/#isso-thread$/)){var n=e.getAttribute("data-isso-id")||e.href.match(/^(.+)#isso-thread$/)[1].replace(/^.*\/\/[^\/]+/,"");n in o?o[n].push(e):o[n]=[e]}});var i=Object.keys(o);e.count(i).then(function(e){for(var n in o)if(o.hasOwnProperty(n))for(var a=i.indexOf(n),r=0;r<o[n].length;r++)o[n][r].textContent=t.pluralize("num-comments",e[a])})}}),define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("text!app/../../css/isso.css",[],function(){
return"#isso-thread * {\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n}\n#isso-thread .isso-comment-header a {\n    text-decoration: none;\n}\n\n#isso-thread {\n    padding: 0;\n    margin: 0;\n}\n#isso-thread > h4 {\n    color: #555;\n    font-weight: bold;\n}\n#isso-thread .textarea {\n    min-height: 58px;\n    outline: 0;\n}\n#isso-thread .textarea.placeholder {\n    color: #AAA;\n}\n\n.isso-comment {\n    max-width: 68em;\n    padding-top: 0.95em;\n    margin: 0.95em auto;\n}\n.isso-comment:not(:first-of-type),\n.isso-follow-up .isso-comment {\n    border-top: 1px solid rgba(0, 0, 0, 0.1);\n}\n.isso-comment > div.avatar,\n.isso-postbox > .avatar {\n    display: block;\n    float: left;\n    width: 7%;\n    margin: 3px 15px 0 0;\n}\n.isso-postbox > .avatar {\n    display: none;\n    float: left;\n    margin: 5px 10px 0 5px;\n    width: 48px;\n    height: 48px;\n    overflow: hidden;\n}\n.isso-comment > div.avatar svg,\n.isso-comment > div.avatar img,\n.isso-postbox > .avatar {\n    max-width: 48px;\n    max-height: 48px;\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    border-radius: 3px;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n.isso-comment > div.text-wrapper {\n    display: block;\n}\n.isso-comment .isso-follow-up {\n    padding-left: calc(7% + 20px);\n}\n.isso-comment > div.text-wrapper > .isso-comment-header, .isso-comment > div.text-wrapper > .isso-comment-footer {\n    font-size: 0.95em;\n}\n.isso-comment > div.text-wrapper > .isso-comment-header {\n    font-size: 0.85em;\n}\n.isso-comment > div.text-wrapper > .isso-comment-header .spacer {\n    padding: 0 6px;\n}\n.isso-comment > div.text-wrapper > .isso-comment-header .spacer,\n.isso-comment > div.text-wrapper > .isso-comment-header a.permalink,\n.isso-comment > div.text-wrapper > .isso-comment-header .note,\n.isso-comment > div.text-wrapper > .isso-comment-header a.parent,\n.isso-comment > div.text-wrapper > .isso-comment-header .identifier-heading {\n    color: gray !important;\n    font-weight: normal;\n    text-shadow: none !important;\n}\n.isso-comment > div.text-wrapper > .isso-comment-header .spacer:hover,\n.isso-comment > div.text-wrapper > .isso-comment-header a.permalink:hover,\n.isso-comment > div.text-wrapper > .isso-comment-header .note:hover,\n.isso-comment > div.text-wrapper > .isso-comment-header a.parent:hover {\n    color: #606060 !important;\n}\n.isso-comment > div.text-wrapper > .isso-comment-header .note {\n    float: right;\n}\n.isso-comment > div.text-wrapper > .isso-comment-header .author {\n    font-weight: bold;\n    color: #555;\n}\n.isso-comment > div.text-wrapper > .isso-comment-header .role {\n    color: #FFF;\n    background-color: #999;\n    border-radius: 5px;\n    padding-left: 5px;\n    padding-right: 5px;\n    font-weight: normal;\n}\n.isso-comment > div.text-wrapper > .isso-comment-header .identifier-value {\n    color: #000;\n    font-weight: normal;\n}\n.isso-comment > div.text-wrapper > .textarea-wrapper .textarea {\n    margin-top: 0.2em;\n}\n.isso-comment > div.text-wrapper > div.text p {\n    margin-top: 0.2em;\n}\n.isso-comment > div.text-wrapper > div.text p:last-child {\n    margin-bottom: 0.2em;\n}\n.isso-comment > div.text-wrapper > div.text h1,\n.isso-comment > div.text-wrapper > div.text h2,\n.isso-comment > div.text-wrapper > div.text h3,\n.isso-comment > div.text-wrapper > div.text h4,\n.isso-comment > div.text-wrapper > div.text h5,\n.isso-comment > div.text-wrapper > div.text h6 {\n    font-size: 130%;\n    font-weight: bold;\n}\n.isso-comment > div.text-wrapper > div.textarea-wrapper .textarea {\n    width: 100%;\n    border: 1px solid #f0f0f0;\n    border-radius: 2px;\n    box-shadow: 0 0 2px #888;\n}\n.isso-comment > div.text-wrapper > .isso-comment-footer {\n    font-size: 0.80em;\n    color: gray !important;\n    clear: left;\n}\n.isso-comment > div.text-wrapper > .isso-comment-footer a {\n    font-weight: bold;\n    text-decoration: none;\n}\n.isso-comment > div.text-wrapper > .isso-comment-footer a:hover {\n    color: #111111 !important;\n    text-shadow: #aaaaaa 0 0 1px !important;\n}\n.isso-comment > div.text-wrapper > .isso-comment-footer > a {\n    position: relative;\n    top: .2em;\n}\n.isso-comment > div.text-wrapper > .isso-comment-footer > a + a {\n    padding-left: 1em;\n}\n.isso-comment > div.text-wrapper > .isso-comment-footer .votes {\n    color: gray;\n}\n.isso-comment > div.text-wrapper > .isso-comment-footer .upvote svg,\n.isso-comment > div.text-wrapper > .isso-comment-footer .downvote svg {\n    position: relative;\n    top: .2em;\n}\n.isso-comment .isso-postbox {\n    margin-top: 0.8em;\n}\n.isso-comment.isso-no-votes span.votes {\n    display: none;\n}\n\n.isso-postbox {\n    max-width: 68em;\n    margin: 0 auto 2em;\n}\n.isso-postbox > .form-wrapper {\n    display: block;\n    padding: 0;\n}\n.isso-postbox > .form-wrapper > .auth-section,\n.isso-postbox > .form-wrapper > .auth-section .post-action {\n    display: block;\n}\n.isso-postbox > .form-wrapper .textarea {\n    margin: 0 0 .3em;\n    padding: .4em .8em;\n    border-radius: 3px;\n    background-color: #fff;\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n#isso-thread .textarea:focus,\n#isso-thread input:focus {\n    border-color: rgba(0, 0, 0, 0.8);\n}\n.isso-postbox > .form-wrapper > .auth-section * {\n    display: inline-block;\n    vertical-align: middle;\n}\n.isso-postbox > .form-wrapper > .auth-section .auth-openid-name {\n    margin: 0;\n    font-weight: bold;\n}\n.isso-postbox > .form-wrapper > .auth-section .auth-facebook-name {\n    margin: 0;\n    font-weight: bold;\n}\n.isso-postbox > .form-wrapper > .auth-section .auth-google-name {\n    margin: 0;\n    font-weight: bold;\n}\n.isso-postbox > .form-wrapper > .auth-section .input-wrapper {\n    max-width: 20%;\n    margin: 0;\n}\n.isso-postbox > .form-wrapper > .auth-section .input-wrapper input {\n    padding: .3em 10px;\n    max-width: 100%;\n    border-radius: 3px;\n    background-color: #fff;\n    line-height: 1.4em;\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n.isso-postbox > .form-wrapper > .auth-section .login-separator {\n    margin-left: 1em;\n    margin-right: 1em;\n}\n.isso-postbox > .form-wrapper > .auth-section .login-wrapper {\n    margin: 0;\n}\n.isso-postbox > .form-wrapper > .auth-section .login-wrapper > a {\n    margin-right: .3em;\n}\n.isso-postbox > .form-wrapper > .auth-section .login-wrapper > a > img {\n    width: 28px;\n    height: 28px;\n    border-radius: 3px;\n}\n.isso-postbox > .form-wrapper > .auth-section .logout-wrapper {\n    margin: 0;\n}\n.isso-postbox > .form-wrapper > .auth-section .logout-wrapper > a {\n    border-radius: 3px;\n    margin-left: 10px;\n    padding-top: 2px;\n    padding-bottom: 2px;\n    padding-left: 8px;\n    padding-right: 8px;\n    font-weight: bold;\n}\n.isso-postbox > .form-wrapper > .auth-section .logout-wrapper > a.logout-link-openid {\n    color: #FFF;\n    background-color: #f7931e;\n}\n.isso-postbox > .form-wrapper > .auth-section .logout-wrapper > a.logout-link-facebook {\n    color: #FFF;\n    background-color: #3b5998;\n}\n.isso-postbox > .form-wrapper > .auth-section .logout-wrapper > a.logout-link-google {\n    color: #FFF;\n    background-color: #dd4b39;\n}\n.isso-postbox > .form-wrapper > .auth-section .post-action > input {\n    float: right;\n    padding: calc(.3em - 1px);\n    border-radius: 2px;\n    border: 1px solid #CCC;\n    background-color: #DDD;\n    cursor: pointer;\n    outline: 0;\n    line-height: 1.4em;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n.isso-postbox > .form-wrapper > .auth-section .post-action > input:hover {\n    background-color: #CCC;\n}\n.isso-postbox > .form-wrapper > .auth-section .post-action > input:active {\n    background-color: #BBB;\n}\n.isso-postbox > .form-wrapper > .markdown-note {\n    margin-top: 4px;\n    font-size: 0.6em;\n    color: gray;\n}\n.isso-postbox > .form-wrapper > .login-note {\n    visibility: hidden;\n    margin-top: 0px;\n    color: #008;\n    font-weight: bold;\n}\n.isso-openid-popup {\n    font-family: sans-serif;\n    background-color: #777;\n}\n.isso-openid-form-box {\n    width: 400px;\n    height: 200px;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin: auto;\n    padding: 12px;\n    background-color: #EEE;\n    border: 2px solid #555;\n}\n#isso-openid-logo {\n    width: 64px;\n    height: 64px;\n    float: left;\n    margin-right: 16px;\n    margin-bottom: 16px;\n}\n.isso-openid-intro-line {\n    font-size: 0.90em;\n    font-weight: bold;\n}\n.isso-openid-login-line {\n    clear: both;\n}\n.isso-openid-hint-line {\n    font-size: 0.70em;\n    color: #555;\n}\n#isso-openid-identifier {\n    width: 240px;\n    margin-right: 8px;\n}\n@media screen and (max-width:600px) {\n    .isso-postbox > .form-wrapper > .auth-section .input-wrapper {\n        display: block;\n        max-width: 100%;\n        margin: 0 0 .3em;\n    }\n    .isso-postbox > .form-wrapper > .auth-section .input-wrapper input {\n        width: 100%;\n    }\n    .isso-postbox > .form-wrapper > .auth-section .post-action {\n        display: block;\n        float: none;\n        text-align: right;\n    }\n}\n"}),define("app/text/css",["text!../../../css/isso.css"],function(e){return{inline:e}}),define("text!app/text/arrow-down.svg",[],function(){return'\x3c!-- Generator: IcoMoon.io --\x3e<svg width="16" height="16" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="gray">\n  <g>\n    <path d="M 24.773,13.701c-0.651,0.669-7.512,7.205-7.512,7.205C 16.912,21.262, 16.456,21.44, 16,21.44c-0.458,0-0.914-0.178-1.261-0.534 c0,0-6.861-6.536-7.514-7.205c-0.651-0.669-0.696-1.87,0-2.586c 0.698-0.714, 1.669-0.77, 2.522,0L 16,17.112l 6.251-5.995 c 0.854-0.77, 1.827-0.714, 2.522,0C 25.47,11.83, 25.427,13.034, 24.773,13.701z">\n    </path>\n  </g>\n</svg>\n'}),define("text!app/text/arrow-up.svg",[],function(){return'\x3c!-- Generator: IcoMoon.io --\x3e<svg width="16" height="16" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="gray">\n  <g>\n    <path d="M 24.773,18.299c-0.651-0.669-7.512-7.203-7.512-7.203C 16.912,10.739, 16.456,10.56, 16,10.56c-0.458,0-0.914,0.179-1.261,0.536 c0,0-6.861,6.534-7.514,7.203c-0.651,0.669-0.696,1.872,0,2.586c 0.698,0.712, 1.669,0.77, 2.522,0L 16,14.89l 6.251,5.995 c 0.854,0.77, 1.827,0.712, 2.522,0C 25.47,20.17, 25.427,18.966, 24.773,18.299z">\n    </path>\n  </g>\n</svg>\n'}),define("app/text/svg",["text!./arrow-down.svg","text!./arrow-up.svg"],function(e,n){return{"arrow-down":e,"arrow-up":n}}),require(["app/lib/ready","app/config","app/i18n","app/api","app/isso","app/count","app/dom","app/text/css","app/text/svg","app/jade","app/auth/openid","app/auth/facebook","app/auth/google"],function(e,n,t,o,i,a,r,s,l,m,c,d,p){"use strict";m.set("conf",n),m.set("i18n",t.translate),m.set("pluralize",t.pluralize),m.set("svg",l),e(function(){if(a(),null===r("#isso-thread"))return console.log("abort, #isso-thread is missing");o.fetch(r("#isso-thread").getAttribute("data-isso-id"),null,null).then(function(e){if(n.init(e.config),n.css){var o=r.new("style");o.type="text/css",o.textContent=s.inline,r("head").append(o)}if(r("#isso-thread").append(r.new("h4")),r("#isso-thread").append(new i.Postbox(null)),r("#isso-thread").append('<div id="isso-root"></div>'),c.init(i),d.init(i),p.init(i),0===e.total_replies)return void(r("#isso-thread > h4").textContent=t.translate("no-comments"));var a=0,l=e.total_replies;e.replies.forEach(function(e){i.insert(e,!1),e.created>a&&(a=e.created),l+=e.total_replies}),r("#isso-thread > h4").textContent=t.pluralize("num-comments",l),e.hidden_replies>0&&i.insert_loader(e,a),window.location.hash.length>0&&r(window.location.hash).scrollIntoView()},function(e){console.log(e)})})}),define("embed",function(){})}();